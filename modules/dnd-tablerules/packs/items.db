{"name":"Good Herbs","type":"consumable","img":"icons/consumables/fruit/berry-coral-pink-green.webp","system":{"description":{"value":"<p>Popcorn prepared with the \"Good Herbs\", or \"Safran\" (Rock of Bral) during a Short or Long Rest provides Inspiration.</p>","chat":"","unidentified":""},"source":"","quantity":1,"weight":1,"price":15,"attunement":0,"equipped":false,"rarity":"common","identified":true,"activation":{"type":"hour","cost":1,"condition":"Short or Long Rest"},"duration":{"value":1,"units":"day"},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":10,"max":"10","per":"charges","recovery":"","autoDestroy":false},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"consumableType":"potion"},"effects":[],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Item.rgcDTiHt9Y8aT3MC"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1670514866997,"modifiedTime":1670515632449,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"17mrauIyeiFVjz3R"}
{"name":"Channel Divinity: Twilight Sanctuary","type":"feat","img":"icons/magic/light/light-lantern-lit-white.webp","system":{"description":{"value":"As an action, you present your holy symbol, and a sphere of twilight emanates from you. The sphere is centered on you, has a 30-ft. radius, and is filled with dim light. The sphere moves with you, and it lasts for 1 minute or until you are @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0]{incapacitated} or die. Whenever a creature (including you) ends its turn in the sphere, you can grant that creature one of these benefits:\n- You grant it [[/roll 1d6  + 10]] temporary hit points.\n- You end one effect on it causing it to be @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0]{charmed} or @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0]{frightened}.\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p><em>2nd-level Twilight Domain feature</em></p>\n<p>You can use your Channel Divinity to refresh your allies with soothing twilight.</p>\n<p>As an action, you present your holy symbol, and a sphere of twilight emanates from you. The sphere is centered on you, has a 30-foot radius, and is filled with dim light. The sphere moves with you, and it lasts for 1 minute or until you are @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0.JournalEntryPage.TpkZgLfxCmSndmpb]{incapacitated} or die. Whenever a creature (including you) ends its turn in the sphere, you can grant that creature one of these benefits:</p>\n<ul>\n<li>You grant it temporary hit points equal to 1d6 plus your cleric level.</li>\n<li>You end one effect on it causing it to be @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0.JournalEntryPage.zZaEBrKkr66OWJvD]{charmed} or @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0.JournalEntryPage.oreoyaFKnvZCrgij]{frightened}.</li>\n</ul>\n  <p></p>\n</details>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":30,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"effects":[],"ownership":{"default":0,"AXDtQGpZTsqjlH8C":3,"npmYF618vZgxA5SD":3},"flags":{"ddbimporter":{"id":"2409733","entityTypeId":"222216831","componentId":2996560,"componentTypeId":12168134,"class":"Cleric","subclass":"Twilight Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"wnI9alrQmhp6nVuW"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"name":"Channel Divinity: Twilight Sanctuary","type":"script","scope":"global","command":"/*\n    Item-Macro Macro for the Feat Item Channel Divinity: Twilight Sanctuary as imported by DDB-Importer. Does not work indepently. Drop https://raw.githubusercontent.com/itteerde/fvttconfig/main/tools/item/feat/fvtt-Item-channel-divinity_-twilight-sanctuary.json onto appropriate Actor (Twilight Cleric) after deleting their imported version of the Feature. Mark to not overwrite for DDB-Importer afterwards.\n*/\n\nconst icon = \"icons/magic/light/light-lantern-lit-white.webp\";\nconst label = \"Channel Divinity: Twilight Sanctuary\";\nconst macroLabel = \"Twilight Sanctuary\";\n\nresult = await item.use();\nif (!result) { // especially the resource might have run out.\n    if (Tablerules.config.loglevel >= 3) {\n        Tablerules.debug({ message: `${macroLabel} received on ${item}.use()`, result: result });\n    }\n    return;\n}\n\nconst effect = actor.effects.find(e => e.getFlag(\"world\", \"TwilightSanctuary\"));\nconst current = effect?.getFlag(\"world\", \"TwilightSanctuary\") ?? 1;\n\nconst effectData = { icon, label, duration: { seconds: 60 } };\nfoundry.utils.setProperty(effectData, \"flags.world.TwilightSanctuary\", current);\n\nconst effectMacroData = { onDelete: { script: \"token.document.setFlag('token-auras', 'aura1.distance', 0);\" } };\nfoundry.utils.setProperty(effectData, \"flags.effectmacro\", effectMacroData);\n\nif (effect) {\n    await effect.update(effectData);\n} else {\n    await actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData]);\n}\n\ntoken.document.setFlag('token-auras', 'aura1.distance', 30);\ntoken.document.setFlag('token-auras', 'aura1.colour', \"#ddddff\");\ntoken.document.setFlag('token-auras', 'aura1.opacity', 0.5);\ntoken.document.setFlag('token-auras', 'aura1.permission', \"all\");\ntoken.document.setFlag('token-auras', 'aura1.square', false);","author":"npmYF618vZgxA5SD","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Actor.H4Gt6jg17IYTtflH.Item.jkDPkkr3NmPTnjFG"},"exportSource":{"world":"sj-testing","system":"dnd5e","coreVersion":"10.288","systemVersion":"2.0.3"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1667823184290,"modifiedTime":1668184360389,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"2YyLG1uoo5mPCC2t"}
{"name":"Tentacle of the Deeps: Summon","type":"feat","system":{"description":{"value":"As a bonus action, you create a 10-foot-long tentacle at a point you can see within 60 ft. of you. The tentacle lasts for 1 minute or until you use this feature to create another tentacle.\nWhen you create the tentacle, you can make a melee spell attack against one creature within 10 ft. of it.\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p><em>1st-level Fathomless feature</em></p>\n<p>You can magically summon a spectral tentacle that strikes at your foes. As a bonus action, you create a 10-foot-long tentacle at a point you can see within 60 feet of you. The tentacle lasts for 1 minute or until you use this feature to create another tentacle.</p>\n<p>When you create the tentacle, you can make a melee spell attack against one creature within 10 feet of it. On a hit, the target takes 1d8 cold damage, and its speed is reduced by 10 feet until the start of your next turn. When you reach 10th level in this class, the damage increases to 2d8.</p>\n<p>As a bonus action on your turn, you can move the tentacle up to 30 feet and repeat the attack. You can summon the tentacle a number of times equal to your proficiency bonus, and you regain all expended uses when you finish a long rest.</p>\n  <p></p>\n</details>","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":10,"width":null,"units":"ft","type":"radius"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":3,"max":"3","per":"lr","recovery":""},"consume":{"type":"attribute","target":"resources.secondary.value","amount":1},"ability":"","actionType":"msak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["@scale.the-fathomless.tentacle-of-the-deeps",""]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"flags":{"ddbimporter":{"id":"2397931","entityTypeId":"222216831","componentId":2986291,"componentTypeId":12168134,"class":"Warlock","subclass":"The Fathomless","dndbeyond":{"levelScale":{"id":383418,"level":1,"description":"1d8 cold damage","dice":{"diceCount":1,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"1d8"},"fixedValue":null},"levelScales":[{"id":383418,"level":1,"description":"1d8 cold damage","dice":{"diceCount":1,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"1d8"},"fixedValue":null},{"id":383419,"level":10,"description":"2d8 cold damage","dice":{"diceCount":2,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"2d8"},"fixedValue":null}],"limitedUse":[{"level":null,"uses":1},{"level":null,"uses":1},{"level":null,"uses":1}]},"importId":"sjSkRXCYY5as4uVA"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Warlock"}},"midi-qol":{"effectActivation":false,"fumbleThreshold":null},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"name":"Tentacle of the Deeps: Summon","type":"script","scope":"global","command":"const macroLabel = \"Tentacle of the Deep\";\nconst texture = \"Spelljammer/Art/tentacle.png\";\n\nif (await item.use() === null) {\n    return;\n}\n\nconst templates = canvas.scene.templates.filter(t => t.flags.dnd5e !== undefined).filter(t => t.flags.dnd5e.origin === `Actor.${actor._id}.Item.${item._id}`);\n\nif (templates.length !== 1) {\n    ui.notifications.error(`${macroLabel}, ${templates.length} Measuring Templates (effects on map) found. Place or delete to make it 1.`, { permanent: true });\n    return;\n}\n\nawait templates[0].update({ \"texture\": texture });\nconsole.log(templates[0]);","author":"npmYF618vZgxA5SD","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"core":{"sourceId":"Actor.pgUJBiwcrO7EH944.Item.oQiKYJWxQ0JynBeM"}},"img":"icons/commodities/biological/tentacle-purple-white.webp","effects":[],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1668655487460,"modifiedTime":1668970077428,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"5w0scnRqA7ikTtRq"}
{"name":"Experimental Elixier (Transformation)","type":"consumable","img":"icons/consumables/drinks/alcohol-spirits-bottle-green.webp","system":{"description":{"value":"<p><strong>Experimental Elixir</strong></p><p><em>3rd-level Alchemist feature</em></p><p>Whenever you finish a long rest, you can magically produce an <em>experimental elixir</em> in an empty flask you touch. Roll on the Experimental Elixir table for the elixir’s effect, which is triggered when someone drinks the elixir. As an action, a creature can drink the elixir or administer it to an @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0]{incapacitated} creature.</p><p>You can create additional <em>experimental elixirs</em> by expending a spell slot of 1st level or higher for each one. When you do so, you use your action to create the elixir in an empty flask you touch, and you choose the elixir’s effect from the Experimental Elixir table.</p><p>Creating an <em>experimental elixir</em> requires you to have alchemist’s supplies on your person, and any elixir you create with this feature lasts until it is drunk or until the end of your next long rest.</p><p>When you reach certain levels in this class, you can make more elixirs at the end of a long rest: two at 6th level and three at 15th level. Roll for each elixir’s effect separately. Each elixir requires its own flask.</p>","chat":"","unidentified":""},"source":"Artificer - Alchimist","quantity":1,"weight":0.125,"price":0,"attunement":0,"equipped":false,"rarity":"common","identified":true,"activation":{"type":"action","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":1,"max":"1","per":"charges","recovery":"","autoDestroy":true},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"consumableType":"potion"},"effects":[],"ownership":{"default":0,"g325YPUxaNNgCApI":3},"flags":{"core":{"sourceId":"Item.laBh4sLgC82VESfZ"},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false},"magicitems":{"enabled":true,"equipped":false,"attuned":false,"charges":"2","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l","destroyCheck":"d1","destroyType":"dt1","spells":{"0":{"id":"8RTDOt80u8aBv9qx","name":"Alter Self","pack":"dnd5e.spells","img":"icons/magic/control/debuff-energy-hold-green.webp","baseLevel":"2","level":"2","consumption":"2","upcast":"2","upcastCost":"1","flatDc":false}}}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1666809572853,"modifiedTime":1666992953578,"lastModifiedBy":"g325YPUxaNNgCApI"},"folder":null,"sort":0,"_id":"81Aw7CV8tDjhVe3V"}
{"name":"Rage","type":"feat","system":{"description":{"value":"As a bonus action enter a rage for up to 1 minute (10 rounds). \n\nYou gain advantage on STR checks and saving throws (not attacks), [[/roll @scale.barbarian.rage]] melee damage with STR weapons, resistance to bludgeoning, piercing, slashing damage. You can't cast or concentrate on spells while raging.\n\nYour rage ends early if you are knocked @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0]{unconscious} or if your turn ends and you haven’t attacked a hostile creature since your last turn or taken damage since then. You can also end your rage as a bonus action.\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p class=\"compendium-hr\">In battle, you fight with primal ferocity. On your turn, you can enter a rage as a <span class=\"No-Break\">bonus action.</span></p>\n<p class=\"Core-Styles_Core-Body-Last--to-apply-extra-space-\">While raging, you gain the following benefits if you aren’t wearing heavy armor:</p>\n<ul>\n<li class=\"Core-Styles_Core-Bulleted\">You have advantage on Strength checks and Strength saving throws.</li>\n<li class=\"Core-Styles_Core-Bulleted\">When you make a melee weapon attack using Strength, you gain a bonus to the damage roll that increases as you gain levels as a barbarian, as shown in the Rage Damage column of the Barbarian table.</li>\n<li class=\"Core-Styles_Core-Bulleted-Last\">You have resistance to bludgeoning, piercing, and slashing damage.</li>\n</ul>\n<p class=\"Core-Styles_Core-Body\">If you are able to cast spells, you can’t cast them or concentrate on them <span class=\"No-Break\">while raging.</span></p>\n<p class=\"Core-Styles_Core-Body\">Your rage lasts for 1 minute. It ends early if you are knocked @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0.JournalEntryPage.UWw13ISmMxDzmwbd]{unconscious} or if your turn ends and you haven’t attacked a hostile creature since your last turn or taken damage since then. You can also end your rage on your turn as a <span class=\"No-Break\">bonus action.</span></p>\n<p class=\"Core-Styles_Core-Body\">Once you have raged the number of times shown for your barbarian level in the Rages column of the Barbarian table, you must finish a long rest before you ca<span class=\"No-Break\">n rage again.</span></p>\n  <p></p>\n</details>","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":3,"max":"3","per":"lr","recovery":""},"consume":{"type":"attribute","target":"resources.primary.value","amount":1},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["@scale.barbarian.rage",""]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"flags":{"ddbimporter":{"id":"1009","entityTypeId":"222216831","componentId":51,"componentTypeId":12168134,"class":"Barbarian","subclass":"Path of the Totem Warrior","dndbeyond":{"levelScale":{"id":26,"level":1,"description":"Damage +2","dice":null,"fixedValue":2},"levelScales":[{"id":26,"level":1,"description":"Damage +2","dice":{"diceCount":null,"diceValue":null,"diceMultiplier":null,"fixedValue":null,"diceString":null},"fixedValue":2},{"id":27,"level":9,"description":"Damage +3","dice":{"diceCount":null,"diceValue":null,"diceMultiplier":null,"fixedValue":null,"diceString":null},"fixedValue":3},{"id":28,"level":16,"description":"Damage +4","dice":{"diceCount":null,"diceValue":null,"diceMultiplier":null,"fixedValue":null,"diceString":null},"fixedValue":4}],"limitedUse":[{"level":null,"uses":1}]},"importId":"YSjCnsUnaiLWGXes"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Barbarian"}},"midi-qol":{"effectActivation":false,"forceCEOn":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Actor.YYSR8OUW2ibpbT5l.Item.aH2bA895102M9zsH"}},"img":"icons/creatures/abilities/mouth-teeth-human.webp","effects":[{"label":"Rage","icon":"icons/creatures/abilities/mouth-teeth-human.webp","origin":"Actor.YYSR8OUW2ibpbT5l.Item.aH2bA895102M9zsH","duration":{"seconds":60,"startTime":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"SKx3GXDSB2MavtCk","changes":[{"key":"flags.midi-qol.advantage.ability.check.str","mode":0,"value":"1","priority":0},{"key":"flags.midi-qol.advantage.ability.save.str","mode":0,"value":"1","priority":0},{"key":"system.traits.dr.value","mode":2,"value":"slashing","priority":20},{"key":"system.traits.dr.value","mode":2,"value":"piercing","priority":20},{"key":"system.traits.dr.value","mode":2,"value":"bludgeoning","priority":20},{"key":"system.traits.dr.value","mode":2,"value":"acid","priority":20},{"key":"system.traits.dr.value","mode":2,"value":"cold","priority":20},{"key":"system.traits.dr.value","mode":2,"value":"fire","priority":20},{"key":"system.traits.dr.value","mode":2,"value":"force","priority":20},{"key":"system.bonuses.mwak.damage","mode":2,"value":"+@scale.barbarian.rage-damage","priority":20},{"key":"macro.tokenMagic","mode":0,"value":"outline","priority":0},{"key":"system.traits.dr.value","mode":2,"value":"lightning","priority":20},{"key":"system.traits.dr.value","mode":2,"value":"necrotic","priority":20},{"key":"system.traits.dr.value","mode":2,"value":"poison","priority":20},{"key":"system.traits.dr.value","mode":2,"value":"radiant","priority":20},{"key":"system.traits.dr.value","mode":2,"value":"thunder","priority":20}],"tint":null,"transfer":false,"flags":{"effective-transferral":{"transferBlock":{"button":false,"chat":false,"displayCard":false}},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""}}}],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1666141791289,"modifiedTime":1668530246636,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"A2x2Pdtc0HPCYuO9"}
{"type":"spell","system":{"description":{"value":"<p>You bless up to three creatures of your choice within range. Whenever a target makes an attack roll or a saving throw before the spell ends, the target can roll a d4 and add the number rolled to the attack roll or saving throw.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 2nd level or higher, you can target one additional creature for each slot level above 1st.</p>","chat":"","unidentified":""},"source":"Basic Rules, Player's Handbook pg 219","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":3,"width":null,"units":"","type":"creature"},"range":{"value":30,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"enc","components":{"value":"a sprinkling of holy water","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"a sprinkling of holy water","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":true},"scaling":{"mode":"none","formula":""}},"name":"Bless","flags":{"ddbimporter":{"id":136126,"definitionId":2016,"entityTypeId":435869154,"dndbeyond":{"lookup":"classSpell","class":"Cleric","level":10,"characterClassId":116804531,"spellLevel":1,"ability":"wis","mod":3,"dc":15,"cantripBoost":false,"overrideDC":false,"id":136126,"entityTypeId":435869154,"healingBoost":0,"usesSpellSlot":true},"originalName":"Bless","sources":[{"sourceId":1,"pageNumber":null,"sourceType":2},{"sourceId":2,"pageNumber":219,"sourceType":1}],"tags":["Buff"],"version":"3.2.4","importId":"HK5s4atPMmweQr7v"},"spell-class-filter-for-5e":{"parentClass":"cleric"},"midi-qol":{"effectActivation":false,"forceCEOn":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Actor.eRdyUWBs84M14oVO.Item.NWATHmrIMp4A5gBK"}},"img":"icons/magic/life/cross-worn-green.webp","effects":[{"label":"Bless","icon":"icons/magic/life/cross-worn-green.webp","origin":"Actor.eRdyUWBs84M14oVO.Item.NWATHmrIMp4A5gBK","duration":{"seconds":60,"startTime":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"oh2s8CE7ILvwiCJs","changes":[{"key":"system.bonuses.abilities.save","mode":2,"value":"+1d4","priority":20},{"key":"system.bonuses.All-Attacks","mode":2,"value":"+1d4","priority":20}],"tint":null,"transfer":false,"flags":{"effective-transferral":{"transferBlock":{"button":false,"chat":false,"displayCard":false}},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""}}}],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1669815040080,"modifiedTime":1669815927630,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"ApmrTa6KNnJGRHRk"}
{"name":"Icefrost Blade","type":"spell","img":"icons/magic/water/projectile-ice-faceted-blue.webp","effects":[],"flags":{"ddbimporter":{"id":288,"definitionId":2410,"entityTypeId":420821570,"dndbeyond":{"lookup":"feat","lookupName":"Magic Initiate (Wizard)","lookupId":63,"level":null,"ability":"int","mod":-1,"dc":9,"overrideDC":false,"id":288,"entityTypeId":420821570,"healingBoost":0,"usesSpellSlot":false},"originalName":"Booming Blade","sources":[{"sourceId":13,"pageNumber":142,"sourceType":1}],"tags":["Damage","Control","Combat"],"version":"2.9.64","importId":"2dvrq87ptrkeggw0"},"betterRolls5e":{"quickVersatile":{"altValue":true,"value":false},"quickCharges":{"value":{"use":true,"resource":true},"altValue":{"use":true,"resource":true}},"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"quickOther":{"context":"","value":true,"altValue":true},"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickTemplate":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true}},"core":{"sourceId":"Item.V3LFknn99aJtMnby"}},"system":{"description":{"value":"<p>You brandish the weapon used in the spell’s casting and make a melee attack with it against one creature within 5 feet of you. On a hit, the target suffers the weapon attack’s normal effects and then becomes sheathed in frost until the start of your next turn. If the target willingly moves 5 feet or more before then, the target takes 1d8 cold damage, and the spell ends.</p>\n<p>This spell’s damage increases when you reach certain levels. At 5th level, the melee attack deals an extra 1d8 cold damage to the target on a hit, and the damage the target takes for moving increases to 2d8. Both damage rolls increase by 1d8 at 11th level (2d8 and 3d8) and again at 17th level (3d8 and 4d8).</p>","chat":"","unidentified":""},"source":"Sword Coast Adventurer's Guide pg 142","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"round"},"target":{"value":5,"width":null,"units":"ft","type":"sphere"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"int","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["0","cold"]],"versatile":"1d8","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":0,"school":"evo","components":{"value":"a melee weapon worth at least 1 sp","vocal":false,"somatic":true,"material":true,"ritual":false,"concentration":false},"materials":{"value":"a melee weapon worth at least 1 sp","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"cantrip","formula":"1d8"}},"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1668970066463,"modifiedTime":1668970066463,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"CkKi3rLpfHNFjXaE"}
{"name":"Spirit Totem (Unicorn Spirit)","type":"feat","system":{"description":{"value":"As a bonus action, you can magically summon a spirit to a point you can see within 60 ft. that lasts for 1 minute (or until you're @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0]{incapacitated}). The spirit creates an aura in a 30-ft. radius around that point and can be moved up to 60 ft. as a bonus action. The spirit's aura effect depends on its type: Bear, Hawk, Unicorn\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p class=\"Core-Styles_Core-Body\">Starting at 2nd level, you can call forth nature spirits to influence the world around you. As a bonus action, you can magically summon an incorporeal spirit to a point you can see within 60 feet of you. The spirit creates an aura in a 30-foot radius around that point. It counts as neither a creature nor an object, though it has the spectral appearance of the creature it represents.</p>\n<p class=\"Core-Styles_Core-Body\">As a bonus action, you can move the spirit up to 60 feet to a point you can see.</p>\n<p class=\"Core-Styles_Core-Body\">The spirit persists for 1 minute or until you’re @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0.JournalEntryPage.TpkZgLfxCmSndmpb]{incapacitated}. Once you use this feature, you can’t use it again until you finish a short or long rest.</p>\n<p class=\"Core-Styles_Core-Body\">The effect of the spirit’s aura depends on the type of spirit you summon from the options below.</p>\n<p class=\"Core-Styles_Core-Body\"><strong><span class=\"Serif-Character-Style_Inline-Subhead-Serif\">Bear Spirit.</span> </strong>The bear spirit grants you and your allies its might and endurance. Each creature of your choice in the aura when the spirit appears gains temporary hit points equal to 5 + your druid level. In addition, you and your allies gain advantage on Strength checks and Strength saving throws while in the aura.</p>\n<p class=\"Core-Styles_Core-Body\"><strong><span class=\"Serif-Character-Style_Inline-Subhead-Serif\">Hawk Spirit.</span></strong> The hawk spirit is a consummate hunter, aiding you and your allies with its keen sight. When a creature makes an attack roll against a target in the spirit’s aura, you can use your reaction to grant advantage to that attack roll. In addition, you and your allies have advantage on Wisdom (Perception) checks while in the aura.</p>\n<p class=\"Core-Styles_Core-Body\"><strong><span class=\"Serif-Character-Style_Inline-Subhead-Serif\">Unicorn Spirit.</span></strong> The unicorn spirit lends its protection to those nearby. You and your allies gain advantage on all ability checks made to detect creatures in the spirit’s aura. In addition, if you cast a spell using a spell slot that restores hit points to any creature inside or outside the aura, each creature of your choice in the aura also regains hit points equal to your druid level.</p>\n  <p></p>\n</details>","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":30,"width":null,"units":"ft","type":"sphere"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":0,"max":"1","per":"sr","recovery":""},"consume":{"type":"attribute","target":"resources.secondary.value","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"flags":{"ddbimporter":{"id":"1114","entityTypeId":"222216831","componentId":676,"componentTypeId":12168134,"class":"Druid","subclass":"Circle of the Shepherd","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"CD1IaXD1fjvLJfwV"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Druid"}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Actor.PG4shx9GXNLPo6dx.Item.pOBj8x7IQZap9IHn"},"itemacro":{"macro":{"name":"Spirit Totem (Unicorn Spirit)","type":"script","scope":"global","command":"/**\n * Item-Macro Macro for Shepherd Druid's Spirit Totem: Unicorn\n * \n * https://www.dndbeyond.com/classes/druid#CircleoftheShepherd\n * \n */\n\nconst useDistance3D = true;\nconst macroLabel = \"Spirit Totem: Unicorn\";\n\nconsole.log({ message: `${macroLabel}`, arguments: arguments });\nconst actor = arguments[2];\nconst item = arguments[0];\n\nlet templates = canvas.scene.templates.filter(t => t.flags.dnd5e !== undefined).filter(t => t.flags.dnd5e.origin === `Actor.${actor._id}.Item.${item._id}`);\n\nlet template = templates[0];\n\nif (actor.effects.filter(e => e.label === \"Spirit Totem (Unicorn Spirit) Template\").length === 1) {\n\n    let tokensInRange = canvas.tokens.placeables.filter(t => t.document.disposition === 1);\n\n    if (useDistance3D) {\n        tokensInRange = tokensInRange.filter(t => (Math.sqrt(TRUtils.distancePlacables(template, t) * TRUtils.distancePlacables(template, t) + (0 - t.document.elevation) * (0 - t.document.elevation))) <= 30);\n    } else {\n        tokensInRange = tokensInRange.filter(t => TRUtils.distancePlacables(template, t) <= 30);\n    }\n\n    const hpHealed = actor._classes.druid.system.levels;\n    const actors = [];\n\n    for (let i = 0; i < tokensInRange.length; i++) {\n        actors.push(tokensInRange[i].actor._id);\n    }\n    const params = { actorId: actors, hpHealed: hpHealed };\n    await Requestor.request({\n        description: \"Spirit Totem (Unicorn Spirit Healing)\",\n        buttonData: [{\n            label: \"(Unicorn Spirit Healing)\",\n            action: async () => {\n                for (let i = 0; i < arguments[5].actorId.length; i++) {\n                    await game.actors.get(arguments[5].actorId[i]).applyDamage(-this.hpHealed);\n                }\n\n            },\n            ...params\n        }]\n    });\n\n    return;\n}\n\nif (await item.use() === null) {\n    return;\n}\n\n\ntemplates = canvas.scene.templates.filter(t => t.flags.dnd5e !== undefined).filter(t => t.flags.dnd5e.origin === `Actor.${actor._id}.Item.${item._id}`);\nconsole.log({ message: \"templates\", templates: templates });\nif (templates.length > 1) {\n    ui.notifications.error(`${macroLabel}, ${templates.length} Measuring Templates (effects on map) found. Please delete them.`, { permanent: true });\n    return;\n}\n\ntemplate = templates[0];\nconsole.log({ message: \"template\", template: template });\n\n\n\n/*\nlet params =\n[{\n    filterType: \"glow\",\n    filterId: \"superSpookyGlow\",\n    outerStrength: 4,\n    innerStrength: 0,\n    color: 0x5099DD,\n    quality: 0.5,\n    padding: 10,\n    animated:\n    {\n        color: \n        {\n           active: true, \n           loopDuration: 3000, \n           animType: \"colorOscillation\", \n           val1:0x5099DD, \n           val2:0x90EEFF\n        }\n    }\n}];\n\n\nawait TokenMagic.addUpdateFiltersOnSelected(params);;\n\nawait TokenMagic.addFilters(template.object, params, true);\n*/\nawait template.update({\n    texture: 'modules/Tablerules/icons/magic/textures/unicornSpiritTotem03.webp',\n    \"flags.tokenmagic.templateData.opacity\": .25\n});","author":"npmYF618vZgxA5SD","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"img":"icons/commodities/treasure/trinket-totem-bone-green.webp","effects":[],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1669495980763,"modifiedTime":1670210254533,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"EE7AVjkdYYq6lYU1"}
{"name":"Torch","type":"consumable","img":"icons/sundries/lights/torch-white.webp","system":{"description":{"value":"<p>A torch burns for 1 hour, providing bright light in a 20-foot radius and dim light for an additional 20 feet. If you make a melee attack with a burning torch and hit, it deals 1 fire damage.</p>","chat":"","unidentified":"Gear"},"source":"Basic Rules, Player's Handbook","quantity":1,"weight":1,"price":0.01,"attunement":0,"equipped":false,"rarity":"","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":1,"max":1,"per":"charges","recovery":"","autoDestroy":true,"autoUse":false},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"consumableType":"trinket","cost":0.01,"baseItem":"","toolType":"","prof":{"_baseProficiency":3,"multiplier":0,"rounding":"down"}},"effects":[],"ownership":{"default":0,"npmYF618vZgxA5SD":3,"AXDtQGpZTsqjlH8C":3},"flags":{"ddbimporter":{"dndbeyond":{"type":"Adventuring Gear","isConsumable":false,"isContainer":false,"isCustomItem":false,"isHomebrew":false,"isMonkWeapon":false,"isPack":false,"levelInfusionGranted":null,"tags":["Damage","Utility","Exploration","Combat"],"sources":[{"sourceId":1,"pageNumber":null,"sourceType":2},{"sourceId":2,"pageNumber":null,"sourceType":1}],"stackable":true},"id":0,"entityTypeId":0,"definitionEntityTypeId":2103445194,"definitionId":91,"originalName":"Torch","version":"3.1.22"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Compendium.world.ddb-spelljammer-items.gl9YH6DeoOpCbGQw"},"Tablerules":{"Light Source":{"light":{"alpha":0.1,"angle":0,"bright":20,"coloration":1,"dim":40,"gradual":true,"luminosity":0.5,"saturation":0,"contrast":0.25,"shadows":0,"animation":{"speed":8,"intensity":1,"reverse":true,"type":"torch"},"darkness":{"min":0,"max":1},"color":"#f8c377","attenuation":0.5}}},"midi-qol":{"onUseMacroParts":{"items":[]}}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1667686412919,"modifiedTime":1668993787217,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"GkkgFoIqx47jNr7j"}
{"name":"Reckless Attack","type":"feat","system":{"description":{"value":"<p><span style=\"font-weight:400\">Starting at 2nd level, you can throw aside all concern for defense to attack with fierce desperation. When you make your first attack on your turn, you can decide to attack recklessly. Doing so gives you advantage on melee weapon attack rolls using Strength during this turn, but attack rolls against you have advantage until your next turn.</span></p>","chat":"","unidentified":""},"source":"Barbarian","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"flags":{"ddbimporter":{"id":53,"type":"class","dndbeyond":{"requiredLevel":2,"displayOrder":5,"levelScale":null,"levelScales":[],"limitedUse":[],"class":"Barbarian"},"class":"Barbarian","subclass":"Path of the Totem Warrior","importId":"YSjCnsUnaiLWGXes"},"obsidian":{"source":{"type":"class","text":"Barbarian"}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Actor.YYSR8OUW2ibpbT5l.Item.Ntbm767yzTP0S3Al"}},"img":"icons/skills/melee/strike-axe-blood-red.webp","effects":[{"label":"Reckless Attack","icon":"icons/skills/melee/strike-axe-blood-red.webp","origin":"Actor.YYSR8OUW2ibpbT5l.Item.Ntbm767yzTP0S3Al","duration":{"rounds":1,"startTime":null,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"GwCxm3UfAsALVffO","changes":[{"key":"flags.midi-qol.advantage.attack.mwak","mode":0,"value":"1","priority":0},{"key":"flags.midi-qol.grants.advantage.attack.all","mode":0,"value":"1","priority":0}],"tint":null,"transfer":false,"flags":{"effective-transferral":{"transferBlock":{"button":false,"chat":false,"displayCard":false}},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""}}}],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1666141791215,"modifiedTime":1668530433148,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"IDlBI6iCTiky5uO3"}
{"type":"spell","system":{"description":{"value":"<p>Up to three creatures of your choice that you can see within range must make Charisma saving throws. Whenever a target that fails this saving throw makes an attack roll or a saving throw before the spell ends, the target must roll a d4 and subtract the number rolled from the attack roll or saving throw.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 2nd level or higher, you can target one additional creature for each slot level above 1st.</p>","chat":"","unidentified":""},"source":"Basic Rules, Player's Handbook pg 216","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":3,"width":null,"units":"","type":"creature"},"range":{"value":30,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"cha","dc":null,"scaling":"spell"},"level":1,"school":"enc","components":{"value":"a drop of blood","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"a drop of blood","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""}},"name":"Bane","flags":{"ddbimporter":{"id":136081,"definitionId":2009,"entityTypeId":435869154,"dndbeyond":{"lookup":"classSpell","class":"Cleric","level":10,"characterClassId":116804531,"spellLevel":1,"ability":"wis","mod":3,"dc":15,"cantripBoost":false,"overrideDC":false,"id":136081,"entityTypeId":435869154,"healingBoost":0,"usesSpellSlot":true},"originalName":"Bane","sources":[{"sourceId":1,"pageNumber":null,"sourceType":2},{"sourceId":2,"pageNumber":216,"sourceType":1}],"tags":["Debuff"],"version":"3.2.4","importId":"HK5s4atPMmweQr7v"},"spell-class-filter-for-5e":{"parentClass":"cleric"},"midi-qol":{"effectActivation":false,"forceCEOn":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Actor.eRdyUWBs84M14oVO.Item.8cD9Lmh9UNc9ur6t"}},"img":"icons/magic/unholy/strike-beam-blood-red-purple.webp","effects":[{"label":"Bane","icon":"icons/magic/unholy/strike-beam-blood-red-purple.webp","origin":"Actor.eRdyUWBs84M14oVO.Item.8cD9Lmh9UNc9ur6t","duration":{"seconds":60,"startTime":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"QHhZ5kGL6qwnd7UJ","changes":[{"key":"system.bonuses.abilities.save","mode":2,"value":"-1d4","priority":20},{"key":"system.bonuses.All-Attacks","mode":2,"value":"-1d4","priority":20}],"tint":null,"transfer":false,"flags":{"effective-transferral":{"transferBlock":{"button":false,"chat":false,"displayCard":false}},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""}}}],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1669815040079,"modifiedTime":1669815972622,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"INseqrecJaWjp5Fg"}
{"name":"Lantern, Bullseye","type":"consumable","system":{"description":{"value":"<p>A bullseye lantern casts bright light in a 60-foot cone and dim light for an additional 60 feet. Once lit, it burns for 6 hours on a flask (1 pint) of oil.</p>","chat":"","unidentified":"Scroll"},"source":"","quantity":1,"weight":2,"price":0,"attunement":0,"equipped":false,"rarity":"common","identified":true,"activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":1,"max":"1","per":"charges","recovery":"","autoDestroy":false,"autoUse":false},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"consumableType":"trinket","baseItem":"","toolType":"","properties":{"mgc":true}},"flags":{"ddbimporter":{"dndbeyond":{"type":"Scroll","avatarUrl":"https://www.dndbeyond.com/avatars/22803/794/637771960619137972.jpeg","largeAvatarUrl":"https://www.dndbeyond.com/avatars/22803/795/637771960620827774.jpeg","filterType":"Scroll","isConsumable":false,"isContainer":false,"isCustomItem":false,"isHomebrew":true,"isMonkWeapon":false,"isPack":false,"levelInfusionGranted":null,"tags":["Utility"],"sources":[],"pictureUrl":"https://www.dndbeyond.com/avatars/22803/795/637771960620827774.jpeg"},"id":0,"entityTypeId":0,"definitionEntityTypeId":112130694,"definitionId":4367723,"originalName":"Lantern, Bullseye","version":"3.1.22"},"magicitems":{"enabled":false,"charges":"0","chargeType":"c1","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","destroy":false,"destroyCheck":"d1","spells":{},"feats":{},"tables":{},"equipped":false,"attuned":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","sorting":"l"},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Compendium.world.ddb-spelljammer-items.MjmToJbCKxowF8cU"},"Tablerules":{"Light Source":{"light":{"alpha":0.2,"angle":53,"bright":60,"coloration":1,"dim":120,"gradual":true,"luminosity":0.5,"saturation":0,"contrast":0,"shadows":0,"animation":{"speed":9,"intensity":3,"reverse":true,"type":"torch"},"darkness":{"min":0,"max":1},"color":"#f8c377","attenuation":1}}}},"effects":[],"img":"icons/sundries/lights/lantern-bullseye-signal-copper.webp","_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1667686411605,"modifiedTime":1668998320612,"lastModifiedBy":"npmYF618vZgxA5SD"},"ownership":{"default":0,"npmYF618vZgxA5SD":3},"folder":null,"sort":0,"_id":"Lt5UkY5BhH0yyhIa"}
{"name":"Experimental Elixier (Flight)","type":"consumable","img":"icons/consumables/drinks/alcohol-spirits-bottle-green.webp","system":{"description":{"value":"<p><strong>Experimental Elixir</strong></p><p><em>3rd-level Alchemist feature</em></p><p>Whenever you finish a long rest, you can magically produce an <em>experimental elixir</em> in an empty flask you touch. Roll on the Experimental Elixir table for the elixir’s effect, which is triggered when someone drinks the elixir. As an action, a creature can drink the elixir or administer it to an @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0]{incapacitated} creature.</p><p>You can create additional <em>experimental elixirs</em> by expending a spell slot of 1st level or higher for each one. When you do so, you use your action to create the elixir in an empty flask you touch, and you choose the elixir’s effect from the Experimental Elixir table.</p><p>Creating an <em>experimental elixir</em> requires you to have alchemist’s supplies on your person, and any elixir you create with this feature lasts until it is drunk or until the end of your next long rest.</p><p>When you reach certain levels in this class, you can make more elixirs at the end of a long rest: two at 6th level and three at 15th level. Roll for each elixir’s effect separately. Each elixir requires its own flask.</p>","chat":"","unidentified":""},"source":"Artificer - Alchimist","quantity":1,"weight":0.125,"price":0,"attunement":0,"equipped":false,"rarity":"common","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":"","recovery":"","autoDestroy":false},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"consumableType":"potion"},"effects":[{"label":"Experimental Elixir: Flight","icon":"icons/consumables/drinks/alcohol-spirits-bottle-green.webp","origin":"Item.pjs7kbzCfT6OYYc1","duration":{"startTime":null,"seconds":600,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":true,"_id":"CtDO5A6RS25gW6Om","changes":[{"key":"system.attributes.movement.fly","mode":2,"value":"+10","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{"isPassive":true},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"noneName","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":"","sourceId":"Item.ozUKM71ttHUbuMF3.ActiveEffect.xEhoscj3hRIYEAw4"}}}],"ownership":{"default":0,"g325YPUxaNNgCApI":3},"flags":{"core":{"sourceId":"Item.laBh4sLgC82VESfZ"},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1666809572853,"modifiedTime":1666923036946,"lastModifiedBy":"g325YPUxaNNgCApI"},"folder":null,"sort":0,"_id":"OgXdKWgRZio5tKwk"}
{"name":"Great Weapon Master","type":"feat","system":{"description":{"value":"On your turn, when you score a critical hit with a melee weapon or reduce a creature to 0 HP with one, you can make one melee weapon attack as a bonus action. Before you make a melee attack with a heavy weapon that you are proficient with, you can choose to take a -5 penalty to the attack roll to add +10 to the attack's damage.\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p>You've learned to put the weight of a weapon to your advantage, letting its momentum empower your strikes. You gain the following benefits:</p>\n<ul>\n<li>On your turn, when you score a critical hit with a melee weapon or reduce a creature to 0 hit points with one, you can make one melee weapon attack as a bonus action.</li>\n<li>Before you make a melee attack with a heavy weapon that you are proficient with, you can choose to take a -5 penalty to the attack roll. If the attack hits, you add +10 to the attack's damage.</li>\n</ul>\n  <p></p>\n</details>","chat":"","unidentified":""},"source":"Player's Handbook pg 167","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"flags":{"ddbimporter":{"id":21,"type":"feat","entityTypeId":1088085227,"dndbeyond":{},"importId":"0Fsh6GjnRi6RRomm"},"obsidian":{"source":{"type":"feat"}},"core":{"sourceId":"Actor.spr1u4OWf0YP1EDg.Item.eiS4zEuxEsObbvMJ"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"}},"img":"icons/weapons/axes/axe-battle-skull-black.webp","effects":[{"label":"Great Weapon Master","icon":"icons/weapons/axes/axe-battle-skull-black.webp","origin":"Actor.YYSR8OUW2ibpbT5l.Item.R5Tk4avT9VPXgolT","duration":{"rounds":1,"startTime":null,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"B3zrC8XR3NCvkdhi","changes":[{"key":"system.bonuses.mwak.attack","mode":2,"value":"-5","priority":20},{"key":"system.bonuses.mwak.damage","mode":2,"value":"+10","priority":20}],"tint":null,"transfer":false,"flags":{"effective-transferral":{"transferBlock":{"button":false,"chat":false,"displayCard":false}},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""}}}],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1666141817700,"modifiedTime":1668553617834,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"Qr9OerqLAmdNxMVR"}
{"type":"spell","system":{"description":{"value":"<p>Your spell bolsters your allies with toughness and resolve. Choose up to three creatures within range. Each target's hit point maximum and current hit points increase by 5 for the duration.</p>\n<p><em><strong>At Higher Levels.</strong></em> When you cast this spell using a spell slot of 3rd level or higher, a target's hit points increase by an additional 5 for each slot level above 2nd.</p>","chat":"","unidentified":""},"source":"Basic Rules, Player's Handbook pg 211","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":8,"units":"hour"},"target":{"value":3,"width":null,"units":"","type":"creature"},"range":{"value":30,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["5","healing"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":2,"school":"abj","components":{"value":"a tiny strip of white cloth","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":false},"materials":{"value":"a tiny strip of white cloth","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"level","formula":"(@item.level - 2) * 5"}},"name":"Aid","flags":{"ddbimporter":{"id":136020,"definitionId":1990,"entityTypeId":435869154,"dndbeyond":{"lookup":"classSpell","class":"Cleric","level":10,"characterClassId":116804531,"spellLevel":2,"ability":"wis","mod":3,"dc":15,"cantripBoost":false,"overrideDC":false,"id":136020,"entityTypeId":435869154,"healingBoost":0,"usesSpellSlot":true},"originalName":"Aid","sources":[{"sourceId":1,"pageNumber":null,"sourceType":2},{"sourceId":2,"pageNumber":211,"sourceType":1}],"tags":["Buff"],"version":"3.2.5","importId":"QZvF1RLtxqetgW6P"},"spell-class-filter-for-5e":{"parentClass":"cleric"},"midi-qol":{"effectActivation":false,"forceCEOn":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Actor.8ugKnRSqQzxSxrZO.Item.lkEkZJQWgyvPUigR"}},"img":"icons/magic/life/heart-cross-strong-blue.webp","effects":[{"label":"Aid","icon":"icons/magic/life/heart-cross-strong-blue.webp","origin":"Actor.8ugKnRSqQzxSxrZO.Item.lkEkZJQWgyvPUigR","duration":{"seconds":28800,"startTime":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"B97VzuSbScI7mJOh","changes":[{"key":"system.attributes.hp.tempmax","mode":2,"value":"+5","priority":20}],"tint":null,"transfer":false,"flags":{"effective-transferral":{"transferBlock":{"button":false,"chat":false,"displayCard":false}},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"effectmacro":{"onCreate":{"script":"const castLevel = effect.flags[\"effective-transferral\"].castData.castLevel;\n\nconst changes = effect.changes;\nconst tempmax = castLevel * 5 - 5;\nchanges[0].value = tempmax;\n\nawait effect.update({ changes: changes });\nawait actor.update({ \"system.attributes.hp.value\": actor.system.attributes.hp.value + tempmax });\n"},"onDelete":{"script":"await actor.update({ \"system.attributes.hp.value\": Math.min(actor.system.attributes.hp.value, actor.system.attributes.hp.max) });"}}}}],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1669848893063,"modifiedTime":1669867153742,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"STzBA50SKtF9srFe"}
{"name":"Tentacle of the Deeps: Attack","type":"feat","system":{"description":{"value":"When you create or move the tentacle, you can make a melee spell attack against one creature within 10 ft. of it. On a hit, the target takes [[/roll @scale.the-fathomless.tentacle-of-the-deeps]] cold damage, and its speed is reduced by 10 ft. until the start of your next turn.\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p><em>1st-level Fathomless feature</em></p>\n<p>You can magically summon a spectral tentacle that strikes at your foes. As a bonus action, you create a 10-foot-long tentacle at a point you can see within 60 feet of you. The tentacle lasts for 1 minute or until you use this feature to create another tentacle.</p>\n<p>When you create the tentacle, you can make a melee spell attack against one creature within 10 feet of it. On a hit, the target takes 1d8 cold damage, and its speed is reduced by 10 feet until the start of your next turn. When you reach 10th level in this class, the damage increases to 2d8.</p>\n<p>As a bonus action on your turn, you can move the tentacle up to 30 feet and repeat the attack. You can summon the tentacle a number of times equal to your proficiency bonus, and you regain all expended uses when you finish a long rest.</p>\n  <p></p>\n</details>","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":10,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"cha","actionType":"msak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["@scale.the-fathomless.tentacle-of-the-deeps[cold] + @mod","cold"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false},"proficient":1,"equipped":true,"rarity":"","identified":true,"weaponType":"simpleM","properties":{"mgc":false}},"flags":{"ddbimporter":{"id":"2398011","entityTypeId":"222216831","action":true,"componentId":2986291,"componentTypeId":12168134,"originalName":"Tentacle of the Deeps: Attack","class":"Warlock","subclass":"The Fathomless","dndbeyond":{"levelScale":{"id":383418,"level":1,"description":"1d8 cold damage","dice":{"diceCount":1,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"1d8"},"fixedValue":null},"levelScales":[{"id":383418,"level":1,"description":"1d8 cold damage","dice":{"diceCount":1,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"1d8"},"fixedValue":null},{"id":383419,"level":10,"description":"2d8 cold damage","dice":{"diceCount":2,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"2d8"},"fixedValue":null}],"limitedUse":[{"level":null,"uses":1},{"level":null,"uses":1},{"level":null,"uses":1}]},"importId":"sjSkRXCYY5as4uVA"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Warlock"}},"midi-qol":{"effectActivation":false,"fumbleThreshold":null},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Actor.pgUJBiwcrO7EH944.Item.RcC3yJPcJx6S1T3X"}},"img":"icons/commodities/biological/tentacle-purple-white.webp","effects":[],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1668655487458,"modifiedTime":1668970071698,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"SiOdFE2JAnVTrYAu"}
{"name":"Channel Divinity: Preserve Life","type":"feat","system":{"description":{"value":"As an action, you can restore  50 HP. Choose any creatures within 30 ft. of you, and divide those hit points among them. This feature can restore a creature to no more than half of its hit point maximum. You can’t use this feature on an undead or a construct.\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p>Starting at 2nd level, you can use your Channel Divinity to heal the badly injured.</p>\n<p>As an action, you present your holy symbol and evoke healing energy that can restore a number of hit points equal to five times your cleric level. Choose any creatures within 30 feet of you, and divide those hit points among them. This feature can restore a creature to no more than half of its hit point maximum. You can’t use this feature on an undead or a construct.</p>\n  <p></p>\n</details>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"charges","target":"lZJXBhXmgpHLkS6S","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"flags":{"ddbimporter":{"id":"53343","entityTypeId":"222216831","componentId":132,"componentTypeId":12168134,"type":"class","class":"Cleric","subclass":"Life Domain","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"QZvF1RLtxqetgW6P"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Cleric"}},"itemacro":{"macro":{"name":"Channel Divinity: Preserve Life","type":"script","scope":"global","command":"/**\n * Item-Macro Macro for Channel Divinity: Preserve Life\n * https://www.dndbeyond.com/classes/cleric#LifeDomain\n * \n * icon-suggestion: icons/magic/light/orb-beams-green.webp\n */\n\nconst macroLabel = \"Channel Divinity: Preserve Life\";\nconst useDistance3D = true;\nconst image = \"icons/magic/light/orb-beams-green.webp\";\n\nif (await item.use() === null) {\n  if (TRUtils.isDebugEnabled()) {\n    Tablerules.debug({ message: `${macroLabel}, item.use() returned null, returning.`, arguments: arguments });\n  }\n  return;\n}\nlet tokensInRange = canvas.tokens.placeables.filter(\n  t => t.document.disposition === 1 &&\n    (t.actor.system.attributes.hp.value < t.actor.system.attributes.hp.max / 2)\n);\n\nif (useDistance3D) {\n  tokensInRange = tokensInRange.filter(t => (Math.sqrt(TRUtils.distanceTokens(token, t) * TRUtils.distanceTokens(token, t) + (token.document.elevation - t.document.elevation) * (token.document.elevation - t.document.elevation))) <= 30);\n} else {\n  tokensInRange = tokensInRange.filter(t => TRUtils.distanceTokens(token, t) <= 30);\n}\n\nconst maxHpHealed = actor._classes.cleric.system.levels * 5;\nlet healingPool = maxHpHealed;\n\nconst tokens = tokensInRange.reduce((acc, token) => {\n  return acc + `\n   <div class=\"form-group\">\n       <label style=\"min-width: 300px;\">${token.actor.name}</label>\n       <label style=\"flex:1;\">${token.actor.system.attributes.hp.value}/${token.actor.system.attributes.hp.max}</label>\n       <div name=\"${token.document.id}\" class=\"form-fields\" style=\"justify-content: left;\">\n           <button type=\"button\" class=\"add\">+</button>\n           <input class=\"heal-value\" data-token-id=\"${token.document.id}\" type=\"number\" style=\"flex: 0; min-width: 30px\" value=\"0\" min=\"0\" max=\"${Math.floor(token.actor.system.attributes.hp.max / 2) - token.actor.system.attributes.hp.value}\" step=\"1\"></input>\n           <button type=\"button\" class=\"minus\">-</button>\n       </div>\n   </div>\n   `;\n}, ``);\n\nconst content = `\n<form style=\"margin-bottom: 10px\">\n   <div style=\"display: flex; margin-bottom: 10px;\">\n       <img src=\"${image}\" title=\"Channel Divinity: Preserve Life\" style=\"flex: 0; width: 100px; height: 100px; margin-right: 10px\" >\n       <div style=\"flex: 1\">As an action, you present your holy symbol and evoke healing energy that can restore a number of hit points equal to five times your cleric level (${maxHpHealed}). Choose any creatures within 30 feet of you, and divide those hit points among them. This feature can restore a creature to no more than half of its hit point maximum. You can’t use this feature on an undead or a construct.</div>\n   </div>\n\n   <div>\n       ${tokens}\n   </div>\n\n   <div class=\"form-group\">\n       <label style=\"flex: 1\">Healing Pool</label>\n       <input name=\"total\" totalstyle=\"flex: 1\" type=\"number\" value=\"${healingPool}\" disabled>\n   </div>\n</form>\n`;\n\nconst dialogResult = await Dialog.prompt({\n  title: macroLabel,\n  content,\n  callback: (html) => {\n    return [...html[0].querySelectorAll(\"input\")].map(i => {\n      return { id: i.dataset.tokenId, healing: i.value };\n    });\n  },\n  render: html => {\n    html[0].addEventListener(\"click\", (event) => clickEvent(event, html));\n    html[0].addEventListener(\"change\", (event) => changeEvent(event, html));\n  },\n  rejectClose: false,\n  label: 'Heal',\n  options: { width: 600 }\n});\n\nlet requestorDescription = \"\";\nfor (let i = 0; i < dialogResult.length - 1; i++) {\n  requestorDescription += ` ${canvas.scene.tokens.find(t => t.id === dialogResult[i].id).actor.name} +${dialogResult[i].healing}`\n}\n\nawait Requestor.request({\n  title: `${macroLabel}`,\n  description: requestorDescription,\n  img: image,\n  whisper: [game.users.getName(\"Gamemaster\").id],\n  buttonData: [{\n    label: \"Approve Healing\",\n    limit: Requestor.LIMIT.ONCE,\n    action: async () => {\n      for (let i = 0; i < this.dialogResult.length - 1; i++) {\n        await canvas.scene.tokens.find(t => t.id === this.dialogResult[i].id).actor.applyDamage(-parseInt(this.dialogResult[i].healing));\n      }\n    },\n    dialogResult: dialogResult // what is here gets into this.<something>\n  }]\n});\n\n\nfunction clickEvent(event, html) {\n  const trg = event.target;\n  if (trg.type !== 'button') return;\n\n  let input;\n  if (trg.classList.contains('add')) {\n    input = trg.nextElementSibling;\n    input.oldValue = input.value;\n    input.value = parseInt(input.value) + 1;\n  } else if (trg.classList.contains('minus')) {\n    input = trg.previousElementSibling;\n    input.oldValue = input.value;\n    input.value = Math.max(parseInt(input.value) - 1, 0);\n  }\n\n  changeEvent(input, html);\n}\n\nfunction changeEvent(input, html) {\n  if (input instanceof Event) input = input.target;\n  const total = html[0].querySelector('input[name=\"total\"]').value;\n  let runningTotal = 0;\n  html[0].querySelectorAll('input.heal-value').forEach(n => runningTotal += parseInt(n.value));\n\n  const oldValue = input.oldValue || 0;\n  const newValue = input.value;\n\n  if (runningTotal > total || newValue > parseInt(input.max)) input.value = oldValue;\n  else input.oldValue = newValue;\n}\n\n\n\n//create Dialog, change values\n//put values returned to GM with Requestor\n//updates (via Actor.applyDamage() for visuals)\n\n/*\n on GUI validation\n https://github.com/krbz999/zhell-macros/blob/main/classes/wizard/arcane_recovery.js , line 73\n\n*/","author":"npmYF618vZgxA5SD","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false,"autoFailFriendly":false,"offHandWeapon":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Actor.8ugKnRSqQzxSxrZO.Item.r7Wpd1lLQMfoELaX"}},"effects":[],"img":"icons/magic/light/orb-beams-green.webp","ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1669848893046,"modifiedTime":1670577074924,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"XAhfk3c11S49oTo5"}
{"name":"Experimental Elixier (?)","type":"consumable","img":"icons/consumables/drinks/alcohol-spirits-bottle-green.webp","system":{"description":{"value":"<p><strong>Experimental Elixir</strong></p><p><em>3rd-level Alchemist feature</em></p><p>Whenever you finish a long rest, you can magically produce an <em>experimental elixir</em> in an empty flask you touch. Roll on the Experimental Elixir table for the elixir’s effect, which is triggered when someone drinks the elixir. As an action, a creature can drink the elixir or administer it to an @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0]{incapacitated} creature.</p><p>You can create additional <em>experimental elixirs</em> by expending a spell slot of 1st level or higher for each one. When you do so, you use your action to create the elixir in an empty flask you touch, and you choose the elixir’s effect from the Experimental Elixir table.</p><p>Creating an <em>experimental elixir</em> requires you to have alchemist’s supplies on your person, and any elixir you create with this feature lasts until it is drunk or until the end of your next long rest.</p><p>When you reach certain levels in this class, you can make more elixirs at the end of a long rest: two at 6th level and three at 15th level. Roll for each elixir’s effect separately. Each elixir requires its own flask.</p><h4 id=\"ExperimentalElixirTable\" class=\"quick-menu-exclude Table-Styles_Table-Title\">Experimental Elixir</h4><table class=\"compendium-left-aligned-table\"><thead><tr><th>d6</th><th>Effect</th></tr></thead><tbody><tr><td><p>1</p></td><td><p><strong>Healing.</strong> The drinker regains a number of hit points equal to 2d4 + your Intelligence modifier.</p></td></tr><tr><td><p>2</p></td><td><p><strong>Swiftness.</strong> The drinker’s walking speed increases by 10 feet for 1 hour.</p></td></tr><tr><td><p>3</p></td><td><p><strong>Resilience.</strong> The drinker gains a +1 bonus to AC for 10 minutes.</p></td></tr><tr><td><p>4</p></td><td><p><strong>Boldness.</strong> The drinker can roll a d4 and add the number rolled to every attack roll and saving throw they make for the next minute.</p></td></tr><tr><td><p>5</p></td><td><p><strong>Flight.</strong> The drinker gains a flying speed of 10 feet for 10 minutes.</p></td></tr><tr><td><p>6</p></td><td><p><strong>Transformation.</strong> The drinker’s body is transformed as if by the alter self spell. The drinker determines the transformation caused by the spell, the effects of which last for 10 minutes.</p></td></tr></tbody></table>","chat":"","unidentified":""},"source":"Artificer - Alchimist","quantity":1,"weight":0.125,"price":0,"attunement":0,"equipped":false,"rarity":"common","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":"","autoDestroy":false},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"consumableType":"potion"},"effects":[{"label":"Experimental Elixir: Swiftness","icon":"icons/consumables/drinks/alcohol-spirits-bottle-green.webp","origin":"Item.laBh4sLgC82VESfZ","duration":{"startTime":null,"seconds":3600,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":true,"_id":"blDy3EInq5Dq3EIH","changes":[{"key":"system.attributes.movement.walk","mode":2,"value":"+10","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{"isPassive":true},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"noneName","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":"","sourceId":"Item.ozUKM71ttHUbuMF3.ActiveEffect.LqK4mrCog9vfEa85"}}},{"label":"Experimental Elixir: Resilience","icon":"icons/consumables/drinks/alcohol-spirits-bottle-green.webp","origin":"Item.6PbfdmuDwNYcIFsb","duration":{"rounds":1,"startTime":null,"seconds":600,"combat":null,"turns":null,"startRound":null,"startTurn":null},"disabled":true,"_id":"MaNi9MSKE5qCBO0d","changes":[{"key":"system.attributes.ac.value","mode":2,"value":"+1","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{"isPassive":true},"core":{"sourceId":"Item.ozUKM71ttHUbuMF3.ActiveEffect.NtK1sjrui0ItHYD8","statusId":""},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"noneName","durationExpression":"","macroRepeat":"none","specialDuration":[]}}},{"label":"Experimental Elixir: Boldness","icon":"icons/consumables/drinks/alcohol-spirits-bottle-green.webp","origin":"Item.6PbfdmuDwNYcIFsb","duration":{"startTime":null,"seconds":60,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":true,"_id":"VH5oXtWp0f7Cxp7q","changes":[{"key":"system.abilities.str.bonuses.save","mode":2,"value":"+1d4","priority":20},{"key":"system.abilities.dex.bonuses.save","mode":2,"value":"+1d4","priority":20},{"key":"system.abilities.con.bonuses.save","mode":2,"value":"+1d4","priority":20},{"key":"system.abilities.int.bonuses.save","mode":2,"value":"+1d4","priority":20},{"key":"system.abilities.wis.bonuses.save","mode":2,"value":"+1d4","priority":20},{"key":"system.abilities.cha.bonuses.save","mode":2,"value":"+1d4","priority":20},{"key":"system.bonuses.All-Attacks","mode":2,"value":"+1d4","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{"isPassive":true},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"noneName","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":"","sourceId":"Item.ozUKM71ttHUbuMF3.ActiveEffect.3ZcZOJzvXsdKEAvq"}}},{"label":"Experimental Elixir: Flight","icon":"icons/consumables/drinks/alcohol-spirits-bottle-green.webp","origin":"Item.6PbfdmuDwNYcIFsb","duration":{"startTime":null,"seconds":600,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":true,"_id":"sOIY54zohnabYRXn","changes":[{"key":"system.attributes.movement.fly","mode":2,"value":"+10","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{"isPassive":true},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"noneName","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":"","sourceId":"Item.ozUKM71ttHUbuMF3.ActiveEffect.xEhoscj3hRIYEAw4"}}}],"ownership":{"default":0,"g325YPUxaNNgCApI":3},"flags":{"core":{"sourceId":"Item.laBh4sLgC82VESfZ"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1666809572853,"modifiedTime":1666993021835,"lastModifiedBy":"g325YPUxaNNgCApI"},"folder":null,"sort":0,"_id":"XQ52foUl1CLS6MTU"}
{"name":"Hexblade's Curse","type":"feat","system":{"description":{"value":"Once per short rest, as a bonus action, choose one creature you can see within 30 ft. to curse it for 1 minute (or until the target dies, you die, or you are @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0]{incapacitated}). Against the cursed target, you gain a [[ + 3]] bonus to damage rolls, score a critical hit on a roll of 19 or 20, and you regain  6 HP if it dies.\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p class=\"Core-Styles_Core-Body--Extra-Space-After-\">Starting at 1st level, you gain the ability to place a baleful curse on someone. As a bonus action, choose one creature you can see within 30 feet of you. The target is cursed for 1 minute. The curse ends early if the target dies, you die, or you are @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0.JournalEntryPage.TpkZgLfxCmSndmpb]{incapacitated}. Until the curse ends, you gain the following benefits:</p>\n<ul>\n<li class=\"Core-Styles_Core-Bulleted\">You gain a bonus to damage rolls against the cursed target. The bonus equals your proficiency bonus.</li>\n<li class=\"Core-Styles_Core-Bulleted\">Any attack roll you make against the cursed target is a critical hit on a roll of 19 or 20 on the d20.</li>\n<li class=\"Core-Styles_Core-Bulleted--Extra-Space-After-\">If the cursed target dies, you regain hit points equal to your warlock level + your Charisma modifier (minimum of 1 hit point).</li>\n</ul>\n<p class=\"Core-Styles_Core-Body\">You can’t use this feature again until you finish a short or long rest.</p>\n  <p></p>\n</details>","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":0,"max":"1","per":"sr","recovery":""},"consume":{"type":"attribute","target":"resources.tertiary.value","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"flags":{"ddbimporter":{"id":"1131","entityTypeId":"222216831","componentId":756,"componentTypeId":12168134,"class":"Warlock","subclass":"The Hexblade","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"NoJnJEiVZpgL9dUM"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Warlock"}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Actor.yO55Y5gJJTOMjiOA.Item.XhhWvX3be2EebATY"},"itemacro":{"macro":{"name":"Hexblade's Curse","type":"script","scope":"global","command":"/**\n * Item-Macro Effect for the Hexblade's Curse Feature Item\n * \n * icon suggestion: icons/magic/death/projectile-skull-flaming-green.webp\n */\n\nconst label = \"Hexblade's Curse\";\nconst macroLabel = \"Hexblade's Curse\";\nconst icon = \"icons/magic/death/projectile-skull-flaming-green.webp\";\n\nif ((await item.use()) === null) {\n    return;\n}\n\nconst changes = [\n    { key: \"system.bonuses.All-Damage\", value: `+${actor.system.attributes.prof}`, mode: 2, priority: 20 },\n    { key: \"flags.dnd5e.spellCriticalThreshold\", value: 19, mode: 5, priority: 20 },\n    { key: \"flags.dnd5e.weaponCriticalThreshold\", value: 19, mode: 5, priority: 20 }\n];\n\nconst effect = actor.effects.find(e => e.getFlag(\"world\", label));\nconst effectData = { changes, icon, label, duration: { seconds: 60 } };\nfoundry.utils.setProperty(effectData, `flags.world.${label}`, true);\n\nif (effect) { effect.update(effectData); }\nelse {\n    await actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData]);\n}","author":"npmYF618vZgxA5SD","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}}},"img":"icons/magic/death/projectile-skull-flaming-green.webp","effects":[],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1666141842488,"modifiedTime":1668317310191,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"ZbxQKJuKQEzrTTSL"}
{"name":"Experimental Elixier (Swiftness)","type":"consumable","img":"icons/consumables/drinks/alcohol-spirits-bottle-green.webp","system":{"description":{"value":"<p><strong>Experimental Elixir</strong></p><p><em>3rd-level Alchemist feature</em></p><p>Whenever you finish a long rest, you can magically produce an <em>experimental elixir</em> in an empty flask you touch. Roll on the Experimental Elixir table for the elixir’s effect, which is triggered when someone drinks the elixir. As an action, a creature can drink the elixir or administer it to an @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0]{incapacitated} creature.</p><p>You can create additional <em>experimental elixirs</em> by expending a spell slot of 1st level or higher for each one. When you do so, you use your action to create the elixir in an empty flask you touch, and you choose the elixir’s effect from the Experimental Elixir table.</p><p>Creating an <em>experimental elixir</em> requires you to have alchemist’s supplies on your person, and any elixir you create with this feature lasts until it is drunk or until the end of your next long rest.</p><p>When you reach certain levels in this class, you can make more elixirs at the end of a long rest: two at 6th level and three at 15th level. Roll for each elixir’s effect separately. Each elixir requires its own flask.</p>","chat":"","unidentified":""},"source":"Artificer - Alchimist","quantity":1,"weight":0.125,"price":0,"attunement":0,"equipped":false,"rarity":"common","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":"","autoDestroy":false},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"consumableType":"potion"},"effects":[{"label":"Experimental Elixir: Swiftness","icon":"icons/consumables/drinks/alcohol-spirits-bottle-green.webp","origin":"Item.laBh4sLgC82VESfZ","duration":{"startTime":null,"seconds":3600,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":true,"_id":"blDy3EInq5Dq3EIH","changes":[{"key":"system.attributes.movement.walk","mode":2,"value":"+10","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{"isPassive":true},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"noneName","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":"","sourceId":"Item.ozUKM71ttHUbuMF3.ActiveEffect.LqK4mrCog9vfEa85"}}}],"ownership":{"default":0,"g325YPUxaNNgCApI":3},"flags":{"core":{"sourceId":"Item.laBh4sLgC82VESfZ"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1666809572853,"modifiedTime":1666923048887,"lastModifiedBy":"g325YPUxaNNgCApI"},"folder":null,"sort":0,"_id":"cMXdBJI5raEXQ798"}
{"type":"spell","system":{"description":{"value":"<p>You call forth a bestial spirit. It manifests in an unoccupied space that you can see within range. This corporeal form uses the Bestial Spirit stat block. When you cast the spell, choose an environment: Air, Land, or Water. The creature resembles an animal of your choice that is native to the chosen environment, which determines certain traits in its stat block. The creature disappears when it drops to 0 hit points or when the spell ends.</p>\n<p>The creature is an ally to you and your companions. In combat, the creature shares your initiative count, but it takes its turn immediately after yours. It obeys your verbal commands (no action required by you). If you don’t issue any, it takes the Dodge action and uses its move to avoid danger.</p>\n<p><em><strong>At Higher Levels.</strong></em> When you cast this spell using a spell slot of 3rd level or higher, use the higher level wherever the spell’s level appears in the stat block.</p>\n<div class=\"Basic-Text-Frame stat-block-finder\">\n<p class=\"Stat-Block-Styles_Stat-Block-Title\">Bestial Spirit</p>\n<p class=\"Stat-Block-Styles_Stat-Block-Metadata\">Small beast</p>\n<p class=\"Stat-Block-Styles_Stat-Block-Data\"><strong>Armor Class</strong> 11 + the level of the spell (natural armor)</p>\n<p class=\"Stat-Block-Styles_Stat-Block-Data\"><strong>Hit Points</strong> 20 (Air only) or 30 (Land and Water only) + 5 for each spell level above 2nd</p>\n<p class=\"Stat-Block-Styles_Stat-Block-Data\"><strong>Speed</strong> 30 ft.; climb 30 ft. (Land only); fly 60 ft. (Air only); swim 30 ft. (Water only)</p>\n<div class=\"stat-block-ability-scores\">\n<div class=\"stat-block-ability-scores-stat\">\n<div class=\"stat-block-ability-scores-heading\">STR</div>\n<div class=\"stat-block-ability-scores-data\"><span class=\"stat-block-ability-scores-score\">18</span> <span class=\"stat-block-ability-scores-modifier\">(+4)</span></div>\n</div>\n<div class=\"stat-block-ability-scores-stat\">\n<div class=\"stat-block-ability-scores-heading\">DEX</div>\n<div class=\"stat-block-ability-scores-data\"><span class=\"stat-block-ability-scores-score\">11</span> <span class=\"stat-block-ability-scores-modifier\">(+0)</span></div>\n</div>\n<div class=\"stat-block-ability-scores-stat\">\n<div class=\"stat-block-ability-scores-heading\">CON</div>\n<div class=\"stat-block-ability-scores-data\"><span class=\"stat-block-ability-scores-score\">16</span> <span class=\"stat-block-ability-scores-modifier\">(+3)</span></div>\n</div>\n<div class=\"stat-block-ability-scores-stat\">\n<div class=\"stat-block-ability-scores-heading\">INT</div>\n<div class=\"stat-block-ability-scores-data\"><span class=\"stat-block-ability-scores-score\">4</span> <span class=\"stat-block-ability-scores-modifier\">(−3)</span></div>\n</div>\n<div class=\"stat-block-ability-scores-stat\">\n<div class=\"stat-block-ability-scores-heading\">WIS</div>\n<div class=\"stat-block-ability-scores-data\"><span class=\"stat-block-ability-scores-score\">14</span> <span class=\"stat-block-ability-scores-modifier\">(+2)</span></div>\n</div>\n<div class=\"stat-block-ability-scores-stat\">\n<div class=\"stat-block-ability-scores-heading\">CHA</div>\n<div class=\"stat-block-ability-scores-data\"><span class=\"stat-block-ability-scores-score\">5</span> <span class=\"stat-block-ability-scores-modifier\">(−3)</span></div>\n</div>\n</div>\n<p class=\"Stat-Block-Styles_Stat-Block-Data\"><strong>Senses</strong> @Compendium[dnd5e.rules.eVtpEGXjA2tamEIJ]{darkvision} 60 ft., passive @Compendium[dnd5e.rules.0AGfrwZRzSG0vNKb]{Perception} 12</p>\n<p class=\"Stat-Block-Styles_Stat-Block-Data\"><strong>Languages</strong> understands the languages you speak</p>\n<p class=\"Stat-Block-Styles_Stat-Block-Data-Last\"><strong>Challenge</strong> — <strong>Proficiency Bonus</strong> equals your bonus</p>\n<p class=\"Stat-Block-Styles_Stat-Block-Body\"><em><strong>Flyby (Air Only).</strong></em> The beast doesn’t provoke opportunity attacks when it flies out of an enemy’s reach.</p>\n<p class=\"Stat-Block-Styles_Stat-Block-Body\"><em><strong>Pack Tactics (Land and Water Only).</strong></em> The beast has advantage on an attack roll against a creature if at least one of the beast’s allies is within 5 feet of the creature and the ally isn’t @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0]{incapacitated}.</p>\n<p class=\"Stat-Block-Styles_Stat-Block-Body\"><em><strong>Water Breathing (Water Only).</strong></em> The beast can breathe only underwater.</p>\n<p class=\"Stat-Block-Styles_Stat-Block-Heading\">Actions</p>\n<p class=\"Stat-Block-Styles_Stat-Block-Body\"><em><strong>Multiattack.</strong></em> The beast makes a number of attacks equal to half this spell’s level (rounded down).</p>\n<p class=\"Stat-Block-Styles_Stat-Block-Body\"><em><strong>Maul.</strong> Melee Weapon Attack:</em> your spell attack modifier to hit, reach 5 ft., one target. <em>Hit:</em> 1d8 + 4 + the spell’s level piercing damage.</p>\n</div>","chat":"","unidentified":""},"source":"Tasha’s Cauldron of Everything pg 109","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":90,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":2,"school":"con","components":{"value":"a feather, tuft of fur, and fish tail inside a gilded acorn worth at least 200 gp","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"a feather, tuft of fur, and fish tail inside a gilded acorn worth at least 200 gp","consumed":false,"cost":200,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"name":"Summon Beast","flags":{"ddbimporter":{"id":5854852,"definitionId":721187,"entityTypeId":435869154,"dndbeyond":{"lookup":"classSpell","class":"Druid","level":6,"characterClassId":103206845,"spellLevel":2,"ability":"wis","mod":3,"dc":14,"cantripBoost":false,"overrideDC":false,"id":5854852,"entityTypeId":435869154,"healingBoost":0,"usesSpellSlot":true},"originalName":"Summon Beast","sources":[{"sourceId":67,"pageNumber":109,"sourceType":1}],"tags":["Summoning"],"version":"3.2.2","importId":"CD1IaXD1fjvLJfwV"},"spell-class-filter-for-5e":{"parentClass":"druid"},"itemacro":{"macro":{"name":"Summon Beast","type":"script","scope":"global","command":"/**\n * Item-Macro Macro onCreation for the Summon Beast Spell, until now only tested from Control Bar.\n * \n * https://www.dndbeyond.com/spells/summon-beast\n * \n * TODO: clean up logging (pretty much remove, or put all to Tablerules logging with .debug() )\n */\n\nconst macroLabel = \"Summon Beast\";\nconst textureLand = \"modules/Tablerules/icons/magic/summons/Einhornchen_Medium_Spirit_01.webp\";\nconst textureAir = \"modules/Tablerules/icons/magic/summons/Quipper_Tiny_Spirit_01.webp\";\nconst textureWater = \"modules/Tablerules/icons/magic/summons/Giant_Octopus_Large_Spirit_01.webp\";\n\nconst addGlow = true;\nconst addBlur = true;\n\n//  from context (Item-Macro), drag Item in Control Bar for Control Bar use with selecting. Use next line for Control Bar without Selection providing the name (ID would be better)\n//actor = game.actors.getName(\"Jorrick\");\n\n// TODO: get from context\nconst item = actor.items.getName(\"Summon Beast\");\n\nconsole.log({ message: macroLabel, actor: actor, item: item, arguments: arguments });\n\n\nconst level = await warpgate.dnd5e.rollItem(item);\n\nconsole.log({ message: macroLabel, level: level, arguments: arguments });\n\nif (!level > 0) {\n    return;\n}\n\nconst summonerDc = actor.data.data.attributes.spelldc;\nconst summonerAttack = summonerDc - 8;\n\n/* Prompt the user for which type of spirit to summon */\nconst buttonData = {\n    buttons: [{\n        label: \"Bestial Spirit Land\",\n        value: {\n            token: { name: \"Bestial Spirit Land\" },\n            actor: { name: \"Bestial Spirit Land\" },\n            embedded: {\n                Item: {\n                    \"Flyby\": warpgate.CONST.DELETE,\n                    \"Water Breathing\": warpgate.CONST.DELETE\n                }\n            }\n        }\n    }, {\n        label: \"Bestial Spirit Air\",\n        value: {\n            actor: { name: \"Bestial Spirit Air\" },\n            token: { name: \"Bestial Spirit Air\" },\n            embedded: {\n                Item: {\n                    \"Pack Tactics\": warpgate.CONST.DELETE,\n                    \"Water Breathing\": warpgate.CONST.DELETE\n                }\n            }\n        }\n    }, {\n        label: \"Bestial Spirit Water\",\n        value: {\n            actor: { name: \"Bestial Spirit Water\" },\n            token: { name: \"Bestial Spirit Water\" },\n            embedded: {\n                Item: {\n                    \"Flyby\": warpgate.CONST.DELETE,\n                    \"Pack Tactics\": warpgate.CONST.DELETE\n                }\n            }\n        }\n    }\n    ], title: \"Which version?\"\n};\n\nlet spirit = await warpgate.buttonDialog(buttonData);\nconsole.log({ message: macroLabel, spirit: spirit });\n\n/* Craft the updates that are common to all spirits */\nlet updates = {\n    token: {\n        \"displayName\": CONST.TOKEN_DISPLAY_MODES.HOVER,\n        \"flags.Tablerules.spellLevel\": level\n    },\n    actor: {\n        'system.attributes.ac.flat': 11 + level,\n        'system.attributes.hp': { value: 30 + 5 * (level - 2), max: 30 + 5 * (level - 2) },\n    },\n    embedded: {\n        Item: {\n            \"Multiattack\": { name: `Multiattack (${Math.floor(level / 2)} attacks)` },\n            \"Maul\": {\n                'system.damage.parts': [[`1d8 + 4 + ${level}`, \"piercing\"]],\n                'system.attackBonus': `- @mod - @prof + ${summonerAttack}`,\n            }\n        }\n    }\n}\n\n/* update variants */\nif (spirit.actor.name === \"Bestial Spirit Land\") {\n    updates[\"actor.img\"] = textureLand;\n    updates[\"token.texture.src\"] = textureLand;\n}\n\nif (spirit.actor.name === \"Bestial Spirit Air\") {\n    console.log({ message: `${macroLabel}, updating variants (${spirit.actor.name})` });\n    updates['actor.system.attributes.hp'] = { value: 20 + 5 * (level - 2), max: 20 + 5 * (level - 2) };\n    updates[\"actor.img\"] = textureAir;\n    updates[\"token.texture.src\"] = textureAir;\n}\n\nif (spirit.actor.name === \"Bestial Spirit Water\") {\n    updates[\"actor.img\"] = textureWater;\n    updates[\"token.texture.src\"] = textureWater;\n}\n\n/* Combine the general and specific updates */\nupdates = mergeObject(updates, spirit);\n\nconst spawnIds = await warpgate.spawn(\"Bestial Spirit\", updates);\n\nconst spawn = canvas.tokens.get(spawnIds[0]); // or canvas.scene.tokens.get(id) to get the document immediately\n\nconsole.log({ message: macroLabel, spawn: spawn, spawnIds: spawnIds });\n\nfor (let i = 0; i < spawnIds.length; i++) {\n    s = canvas.tokens.get(spawnIds[i]);\n}","author":"npmYF618vZgxA5SD","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Actor.PG4shx9GXNLPo6dx.Item.jBRTbuFT4z8CFM8G"}},"img":"icons/commodities/claws/claw-bear-brown-grey.webp","effects":[],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1669495980778,"modifiedTime":1670444068829,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"dfD46q81qCLH73Ee"}
{"name":"Lantern, Hooded (Uncovered)","type":"loot","system":{"description":{"value":"<p>A hooded lantern casts bright light in a 30-foot radius and dim light for an additional 30 feet. Once lit, it burns for 6 hours on a flask (1 pint) of oil. As an action, you can lower the hood, reducing the light to dim light in a 5-foot radius.</p>","chat":"","unidentified":"Gear"},"source":"Basic Rules, Player's Handbook","quantity":1,"weight":2,"price":5,"attunement":0,"equipped":false,"rarity":"common","identified":true,"cost":5,"baseItem":"","toolType":""},"flags":{"ddbimporter":{"dndbeyond":{"type":"Adventuring Gear","isConsumable":false,"isContainer":false,"isCustomItem":false,"isHomebrew":false,"isMonkWeapon":false,"isPack":false,"levelInfusionGranted":null,"tags":["Utility","Exploration"],"sources":[{"sourceId":1,"pageNumber":null,"sourceType":2},{"sourceId":2,"pageNumber":null,"sourceType":1}],"stackable":true},"id":0,"entityTypeId":0,"definitionEntityTypeId":2103445194,"definitionId":57,"originalName":"Lantern, Hooded","version":"3.1.22"},"magicitems":{"enabled":false},"core":{"sourceId":"Compendium.world.ddb-spelljammer-items.defHDg3miPhloN45"},"Tablerules":{"Light Source":{"light":{"alpha":0.1,"angle":0,"bright":30,"coloration":1,"dim":60,"gradual":true,"luminosity":0.5,"saturation":0,"contrast":0.25,"shadows":0,"animation":{"speed":4,"intensity":1,"reverse":true,"type":"torch"},"darkness":{"min":0,"max":1},"color":"#f8c377","attenuation":0.5}}}},"effects":[],"img":"icons/sundries/lights/lantern-steel.webp","_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1667686412242,"modifiedTime":1668994684660,"lastModifiedBy":"npmYF618vZgxA5SD"},"ownership":{"default":0,"npmYF618vZgxA5SD":3},"folder":null,"sort":0,"_id":"disupqHDYYM1MroM"}
{"type":"spell","system":{"description":{"value":"<p>A flash of light streaks toward a creature of your choice within range. Make a ranged spell attack against the target. On a hit, the target takes 4d6 radiant damage, and the next attack roll made against this target before the end of your next turn has advantage, thanks to the mystical dim light glittering on the target until then.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 2nd level or higher, the damage increases by 1d6 for each slot level above 1st.</p>","chat":"","unidentified":""},"source":"Basic Rules, Player's Handbook pg 248","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"round"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":120,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"rsak","attackBonus":"0","chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["4d6[radiant]","radiant"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"evo","components":{"value":"","vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":"1d6"}},"name":"Guiding Bolt","flags":{"ddbimporter":{"id":138023,"definitionId":2133,"entityTypeId":435869154,"dndbeyond":{"lookup":"classSpell","class":"Cleric","level":10,"characterClassId":116804531,"spellLevel":1,"ability":"wis","mod":3,"dc":15,"cantripBoost":false,"overrideDC":false,"id":138023,"entityTypeId":435869154,"healingBoost":0,"usesSpellSlot":true},"originalName":"Guiding Bolt","sources":[{"sourceId":1,"pageNumber":null,"sourceType":2},{"sourceId":2,"pageNumber":248,"sourceType":1}],"tags":["Damage","Buff"],"version":"3.2.4","importId":"HK5s4atPMmweQr7v"},"spell-class-filter-for-5e":{"parentClass":"cleric"},"midi-qol":{"fumbleThreshold":null,"effectActivation":false,"forceCEOn":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Actor.eRdyUWBs84M14oVO.Item.uR59ZwbfhzSyhVep"}},"img":"icons/magic/fire/flame-burning-hand-purple.webp","effects":[{"label":"Guiding Bolt","icon":"icons/magic/fire/flame-burning-hand-purple.webp","origin":"Actor.eRdyUWBs84M14oVO.Item.uR59ZwbfhzSyhVep","duration":{"rounds":1,"startTime":null,"seconds":null,"combat":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"8sNF4rAEjrzqPS6C","changes":[],"tint":null,"transfer":false,"flags":{"effectmacro":{"onCreate":{"script":"let params =\n[{\n    filterType: \"glow\",\n    filterId: \"GuidingBolt\",\n    outerStrength: 4,\n    innerStrength: 0,\n    color: 0x5099DD,\n    quality: 0.5,\n    padding: 10,\n    animated:\n    {\n        color: \n        {\n           active: true, \n           loopDuration: 3000, \n           animType: \"colorOscillation\", \n           val1:0xfff24f, \n           val2:0xfffabc\n        }\n    }\n}];\n\nawait TokenMagic.addFilters(token, params);"},"onDelete":{"script":"await TokenMagic.deleteFilters(token, \"GuidingBolt\");"}},"effective-transferral":{"transferBlock":{"button":false,"chat":false,"displayCard":false}},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""}}}],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1669815040088,"modifiedTime":1669817155317,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"eRjEFOAgWhs5CKlK"}
{"type":"spell","system":{"description":{"value":"<p>A shimmering field appears and surrounds a creature of your choice within range, granting it a +2 bonus to AC for the duration.</p>","chat":"","unidentified":""},"source":"Basic Rules, Player's Handbook pg 275","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":10,"units":"minute"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":60,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"abj","components":{"value":"a small parchment with a bit of holy text written on it","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"a small parchment with a bit of holy text written on it","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"name":"Shield of Faith","flags":{"ddbimporter":{"id":138705,"definitionId":2248,"entityTypeId":435869154,"dndbeyond":{"lookup":"classSpell","class":"Cleric","level":10,"characterClassId":116804531,"spellLevel":1,"ability":"wis","mod":3,"dc":15,"cantripBoost":false,"overrideDC":false,"id":138705,"entityTypeId":435869154,"healingBoost":0,"usesSpellSlot":true},"originalName":"Shield of Faith","sources":[{"sourceId":1,"pageNumber":null,"sourceType":2},{"sourceId":2,"pageNumber":275,"sourceType":1}],"tags":["Buff","Warding"],"version":"3.2.4","importId":"HK5s4atPMmweQr7v"},"spell-class-filter-for-5e":{"parentClass":"cleric"},"midi-qol":{"effectActivation":false,"forceCEOn":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Actor.eRdyUWBs84M14oVO.Item.CiFse7ZMmwd1Hvlj"}},"img":"icons/magic/defensive/shield-barrier-flaming-diamond-blue-yellow.webp","effects":[{"label":"Shield of Faith","icon":"icons/magic/defensive/shield-barrier-flaming-diamond-blue-yellow.webp","origin":"Actor.eRdyUWBs84M14oVO.Item.CiFse7ZMmwd1Hvlj","duration":{"seconds":600,"startTime":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"ZhHTjR4w7oqH7SVG","changes":[{"key":"system.attributes.ac.bonus","mode":2,"value":"+2","priority":20}],"tint":null,"transfer":false,"flags":{"effective-transferral":{"transferBlock":{"button":false,"chat":false,"displayCard":false}},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""},"effectmacro":{"onCreate":{"script":"let params =\n[{\n    filterType: \"glow\",\n    filterId: \"ShieldOfFaith\",\n    outerStrength: 4,\n    innerStrength: 0,\n    color: 0x5099DD,\n    quality: 0.5,\n    padding: 10,\n    animated:\n    {\n        color: \n        {\n           active: true, \n           loopDuration: 3000, \n           animType: \"colorOscillation\", \n           val1:0x5099DD, \n           val2:0x90EEFF\n        }\n    }\n}];\n\nawait TokenMagic.addUpdateFilters(token, params);"},"onDelete":{"script":"await TokenMagic.deleteFilters(token, \"ShieldOfFaith\");"}}}}],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1669815040072,"modifiedTime":1669817152831,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"fFZAA0nZ0fiKTExU"}
{"name":"Shift: Beasthide","type":"feat","system":{"description":{"value":"As a bonus action, you can shift and assume a more bestial form and gain  6 temporary hit points. Your transformation lasts for 1 minute, until you die, or until you revert using a bonus action. You can shift  3 times per long rest.\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p>As a bonus action, you can assume a more bestial appearance. This transformation lasts for 1 minute, until you die, or until you revert to your normal appearance as a bonus action. When you shift, you gain temporary hit points equal to 2 × your proficiency bonus. You can shift a number of times equal to your proficiency bonus, and you regain all expended uses when you finish a long rest.</p>\n  <p></p>\n</details>","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":1,"max":"3","per":"lr","recovery":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"con","actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["1d6 + 2 * @prof","temphp"]],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"flags":{"ddbimporter":{"id":"5119129","entityTypeId":"222216831","componentId":8429585,"componentTypeId":1960452172,"importId":"t9vP0K30lQD5xJgl"},"infusions":{"infused":false},"obsidian":{"source":{"type":"race"}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"itemacro":{"macro":{"name":"Shift: Beasthide","type":"script","scope":"global","command":"// icon suggestion: icons/creatures/mammals/cat-hunched-glowing-red.webp\nconst icon = \"icons/creatures/mammals/cat-hunched-glowing-red.webp\";\nconst label = \"Shifting\";\nconst macroLabel = \"Shifting\";\n\nif ((await item.use()) === null) {\n    return;\n}\n\n\nconst changes = [\n    { key: \"system.attributes.ac.bonus\", value: \"+1\", mode: 2, priority: 20 }\n];\n\nconst effect = actor.effects.find(e => e.getFlag(Tablerules.dictionary.race.shifter.features.shiftingBeasthide.scope, Tablerules.dictionary.race.shifter.features.shiftingBeasthide.key));\n\nconst current = effect?.getFlag(Tablerules.dictionary.race.shifter.features.shiftingBeasthide.scope, Tablerules.dictionary.race.shifter.features.shiftingBeasthide.key) ?? false;\n\nconst effectData = { changes, icon, label, duration: { seconds: 60 } };\nfoundry.utils.setProperty(effectData, `flags.${Tablerules.dictionary.race.shifter.features.shiftingBeasthide.scope}.${Tablerules.dictionary.race.shifter.features.shiftingBeasthide.key}`, true);\n\nif (effect) { effect.update(effectData); }\nelse {\n    await actor.createEmbeddedDocuments(\"ActiveEffect\", [effectData]);\n}\n\nconst roll = await new Roll(`1d6+${2 * actor.system.attributes.prof}`, actor.getRollData()).evaluate({ async: true })\n\nawait roll.toMessage({ speaker: ChatMessage.getSpeaker({ actor: actor.name }), flavor: `getting temporary hit points from ${Tablerules.dictionary.race.shifter.features.shiftingBeasthide.label}.` });\n\nconst currentTempHP = actor.system.attributes.hp.temp !== null ? actor.system.attributes.hp.temp : 0;\nconst newTempHP = Math.max(roll.total, currentTempHP);\n\nawait actor.update({ \"system.attributes.hp.temp\": newTempHP });","author":"npmYF618vZgxA5SD","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Actor.nrTOaAjDjugyxtpD.Item.A6YgYArwQQzOO2C9"}},"img":"icons/creatures/abilities/cougar-pounce-stalk-black.webp","effects":[],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1666141884842,"modifiedTime":1668538419962,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"fUKxM3X9eTZmLJWP"}
{"name":"Lantern, Hooded (Covered)","type":"loot","system":{"description":{"value":"<p>A hooded lantern casts bright light in a 30-foot radius and dim light for an additional 30 feet. Once lit, it burns for 6 hours on a flask (1 pint) of oil. As an action, you can lower the hood, reducing the light to dim light in a 5-foot radius.</p>","chat":"","unidentified":"Gear"},"source":"Basic Rules, Player's Handbook","quantity":1,"weight":2,"price":5,"attunement":0,"equipped":false,"rarity":"common","identified":true,"cost":5,"baseItem":"","toolType":""},"flags":{"ddbimporter":{"dndbeyond":{"type":"Adventuring Gear","isConsumable":false,"isContainer":false,"isCustomItem":false,"isHomebrew":false,"isMonkWeapon":false,"isPack":false,"levelInfusionGranted":null,"tags":["Utility","Exploration"],"sources":[{"sourceId":1,"pageNumber":null,"sourceType":2},{"sourceId":2,"pageNumber":null,"sourceType":1}],"stackable":true},"id":0,"entityTypeId":0,"definitionEntityTypeId":2103445194,"definitionId":57,"originalName":"Lantern, Hooded","version":"3.1.22"},"magicitems":{"enabled":false},"core":{"sourceId":"Compendium.world.ddb-spelljammer-items.defHDg3miPhloN45"},"Tablerules":{"Light Source":{"light":{"alpha":0.1,"angle":0,"bright":0,"coloration":1,"dim":5,"gradual":true,"luminosity":0.5,"saturation":0,"contrast":0.25,"shadows":0,"animation":{"speed":1,"intensity":1,"reverse":true,"type":"torch"},"darkness":{"min":0,"max":1},"color":"#f8c377","attenuation":0.5}}}},"effects":[],"img":"icons/sundries/lights/lantern-steel.webp","_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1667686412242,"modifiedTime":1668994879205,"lastModifiedBy":"npmYF618vZgxA5SD"},"ownership":{"default":0,"npmYF618vZgxA5SD":3},"folder":null,"sort":0,"_id":"jJsUQvzmJj0U6la7"}
{"name":"Experimental Elixier (Resilience)","type":"consumable","img":"icons/consumables/drinks/alcohol-spirits-bottle-green.webp","system":{"description":{"value":"<p><strong>Experimental Elixir</strong></p><p><em>3rd-level Alchemist feature</em></p><p>Whenever you finish a long rest, you can magically produce an <em>experimental elixir</em> in an empty flask you touch. Roll on the Experimental Elixir table for the elixir’s effect, which is triggered when someone drinks the elixir. As an action, a creature can drink the elixir or administer it to an @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0]{incapacitated} creature.</p><p>You can create additional <em>experimental elixirs</em> by expending a spell slot of 1st level or higher for each one. When you do so, you use your action to create the elixir in an empty flask you touch, and you choose the elixir’s effect from the Experimental Elixir table.</p><p>Creating an <em>experimental elixir</em> requires you to have alchemist’s supplies on your person, and any elixir you create with this feature lasts until it is drunk or until the end of your next long rest.</p><p>When you reach certain levels in this class, you can make more elixirs at the end of a long rest: two at 6th level and three at 15th level. Roll for each elixir’s effect separately. Each elixir requires its own flask.</p>","chat":"","unidentified":""},"source":"Artificer - Alchimist","quantity":1,"weight":0.125,"price":0,"attunement":0,"equipped":false,"rarity":"common","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":"","autoDestroy":false},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"consumableType":"potion"},"effects":[{"label":"Experimental Elixir: Resilience","icon":"icons/consumables/drinks/alcohol-spirits-bottle-green.webp","origin":"Item.xfQohUH2yX2wwoZI","duration":{"rounds":1,"startTime":null,"seconds":600,"combat":null,"turns":null,"startRound":null,"startTurn":null},"disabled":true,"_id":"dvtoUJ9jpjpZYqUk","changes":[{"key":"system.attributes.ac.value","mode":2,"value":"+1","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{"isPassive":true},"core":{"sourceId":"Item.ozUKM71ttHUbuMF3.ActiveEffect.NtK1sjrui0ItHYD8","statusId":""},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"noneName","durationExpression":"","macroRepeat":"none","specialDuration":[]}}}],"ownership":{"default":0,"g325YPUxaNNgCApI":3},"flags":{"core":{"sourceId":"Item.laBh4sLgC82VESfZ"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1666809572853,"modifiedTime":1666923041386,"lastModifiedBy":"g325YPUxaNNgCApI"},"folder":null,"sort":0,"_id":"mLrTLppNUv7oR6TD"}
{"name":"Experimental Elixier (Bodlness)","type":"consumable","img":"icons/consumables/drinks/alcohol-spirits-bottle-green.webp","system":{"description":{"value":"<p><strong>Experimental Elixir</strong></p><p><em>3rd-level Alchemist feature</em></p><p>Whenever you finish a long rest, you can magically produce an <em>experimental elixir</em> in an empty flask you touch. Roll on the Experimental Elixir table for the elixir’s effect, which is triggered when someone drinks the elixir. As an action, a creature can drink the elixir or administer it to an @Compendium[dnd5e.rules.w7eitkpD7QQTB6j0]{incapacitated} creature.</p><p>You can create additional <em>experimental elixirs</em> by expending a spell slot of 1st level or higher for each one. When you do so, you use your action to create the elixir in an empty flask you touch, and you choose the elixir’s effect from the Experimental Elixir table.</p><p>Creating an <em>experimental elixir</em> requires you to have alchemist’s supplies on your person, and any elixir you create with this feature lasts until it is drunk or until the end of your next long rest.</p><p>When you reach certain levels in this class, you can make more elixirs at the end of a long rest: two at 6th level and three at 15th level. Roll for each elixir’s effect separately. Each elixir requires its own flask.</p>","chat":"","unidentified":""},"source":"Artificer - Alchimist","quantity":1,"weight":0.125,"price":0,"attunement":0,"equipped":false,"rarity":"common","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":"","autoDestroy":false},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"consumableType":"potion"},"effects":[{"label":"Experimental Elixir: Boldness","icon":"icons/consumables/drinks/alcohol-spirits-bottle-green.webp","origin":"Item.3YwnS2quZ99coVkN","duration":{"startTime":null,"seconds":60,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":true,"_id":"6PToqpeqfMpfbwRi","changes":[{"key":"system.abilities.str.bonuses.save","mode":2,"value":"+1d4","priority":20},{"key":"system.abilities.dex.bonuses.save","mode":2,"value":"+1d4","priority":20},{"key":"system.abilities.con.bonuses.save","mode":2,"value":"+1d4","priority":20},{"key":"system.abilities.int.bonuses.save","mode":2,"value":"+1d4","priority":20},{"key":"system.abilities.wis.bonuses.save","mode":2,"value":"+1d4","priority":20},{"key":"system.abilities.cha.bonuses.save","mode":2,"value":"+1d4","priority":20},{"key":"system.bonuses.All-Attacks","mode":2,"value":"+1d4","priority":20}],"tint":null,"transfer":true,"flags":{"times-up":{"isPassive":true},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"noneName","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":"","sourceId":"Item.ozUKM71ttHUbuMF3.ActiveEffect.3ZcZOJzvXsdKEAvq"}}}],"ownership":{"default":0,"g325YPUxaNNgCApI":3},"flags":{"core":{"sourceId":"Item.laBh4sLgC82VESfZ"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.288","createdTime":1666809572853,"modifiedTime":1666923942951,"lastModifiedBy":"g325YPUxaNNgCApI"},"folder":null,"sort":0,"_id":"mnvYM55xePJmqrGl"}
{"type":"spell","system":{"description":{"value":"<p>You channel magical insight to the creature who failed the Ability Check. That creature can roll a d4 and add the number rolled to the check, potentially turning it into a success.</p><p>Once a creature rolls the die for this Spell, that creature can’t benefit from the Spell again until the creature finishes a Long Rest.</p>","chat":"","unidentified":""},"source":"Basic Rules, Player's Handbook pg 248","activation":{"type":"reaction","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":30,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":0,"school":"div","components":{"value":"","vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""}},"name":"Guidance","flags":{"ddbimporter":{"id":138016,"definitionId":2132,"entityTypeId":435869154,"dndbeyond":{"lookup":"classSpell","class":"Cleric","level":10,"characterClassId":116804531,"spellLevel":0,"ability":"wis","mod":3,"dc":15,"cantripBoost":false,"overrideDC":false,"id":138016,"entityTypeId":435869154,"healingBoost":0,"usesSpellSlot":false},"originalName":"Guidance","sources":[{"sourceId":1,"pageNumber":null,"sourceType":2},{"sourceId":2,"pageNumber":248,"sourceType":1}],"tags":["Buff"],"version":"3.2.4","importId":"HK5s4atPMmweQr7v"},"spell-class-filter-for-5e":{"parentClass":"cleric"},"midi-qol":{"effectActivation":false,"forceCEOn":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Actor.eRdyUWBs84M14oVO.Item.GV6H3MVuL1KeHvfz"}},"img":"icons/magic/control/buff-flight-wings-blue.webp","effects":[],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1669815040075,"modifiedTime":1669815376744,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"neSGAzlL5WAXqehT"}
{"name":"Tentacle of the Deeps: Move","type":"feat","system":{"description":{"value":"As a bonus action on your turn, you can move the tentacle up to 30 feet and repeat the attack.\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p><em>1st-level Fathomless feature</em></p>\n<p>You can magically summon a spectral tentacle that strikes at your foes. As a bonus action, you create a 10-foot-long tentacle at a point you can see within 60 feet of you. The tentacle lasts for 1 minute or until you use this feature to create another tentacle.</p>\n<p>When you create the tentacle, you can make a melee spell attack against one creature within 10 feet of it. On a hit, the target takes 1d8 cold damage, and its speed is reduced by 10 feet until the start of your next turn. When you reach 10th level in this class, the damage increases to 2d8.</p>\n<p>As a bonus action on your turn, you can move the tentacle up to 30 feet and repeat the attack. You can summon the tentacle a number of times equal to your proficiency bonus, and you regain all expended uses when you finish a long rest.</p>\n  <p></p>\n</details>","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":30,"long":null,"units":"ft"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["",""]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"flags":{"ddbimporter":{"id":"2397964","entityTypeId":"222216831","componentId":2986291,"componentTypeId":12168134,"class":"Warlock","subclass":"The Fathomless","dndbeyond":{"levelScale":{"id":383418,"level":1,"description":"1d8 cold damage","dice":{"diceCount":1,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"1d8"},"fixedValue":null},"levelScales":[{"id":383418,"level":1,"description":"1d8 cold damage","dice":{"diceCount":1,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"1d8"},"fixedValue":null},{"id":383419,"level":10,"description":"2d8 cold damage","dice":{"diceCount":2,"diceValue":8,"diceMultiplier":null,"fixedValue":null,"diceString":"2d8"},"fixedValue":null}],"limitedUse":[{"level":null,"uses":1},{"level":null,"uses":1},{"level":null,"uses":1}]},"importId":"sjSkRXCYY5as4uVA"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Warlock"}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Actor.pgUJBiwcrO7EH944.Item.gQSrwbg82LgrIySd"}},"img":"icons/commodities/biological/tentacle-purple-white.webp","effects":[],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1668655487461,"modifiedTime":1668970074646,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"p3Gg9G100VUcauvy"}
{"type":"spell","system":{"description":{"value":"<p>You touch one object that is no larger than 10 feet in any dimension. Until the spell ends, the object sheds bright light in a 20-foot radius and dim light for an additional 20 feet. The light can be colored as you like. Completely covering the object with something opaque blocks the light. The spell ends if you cast it again or dismiss it as an action.</p>\n<p>If you target an object held or worn by a hostile creature, that creature must succeed on a Dexterity saving throw to avoid the spell.</p>","chat":"","unidentified":""},"source":"Basic Rules, Player's Handbook pg 255","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":1,"width":null,"units":"","type":"object"},"range":{"value":null,"long":null,"units":"touch"},"uses":{"value":null,"max":"","per":"","recovery":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"dex","dc":null,"scaling":"spell"},"level":0,"school":"evo","components":{"value":"a firefly or phosphorescent moss","vocal":true,"somatic":false,"material":true,"ritual":false,"concentration":false},"materials":{"value":"a firefly or phosphorescent moss","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""}},"name":"Light","flags":{"ddbimporter":{"id":138400,"definitionId":2166,"entityTypeId":435869154,"dndbeyond":{"lookup":"classSpell","class":"Cleric","level":10,"characterClassId":116804531,"spellLevel":0,"ability":"wis","mod":3,"dc":15,"cantripBoost":false,"overrideDC":false,"id":138400,"entityTypeId":435869154,"healingBoost":0,"usesSpellSlot":false},"originalName":"Light","sources":[{"sourceId":1,"pageNumber":null,"sourceType":2},{"sourceId":2,"pageNumber":255,"sourceType":1}],"tags":["Creation","Utility"],"version":"3.2.4","importId":"HK5s4atPMmweQr7v"},"spell-class-filter-for-5e":{"parentClass":"cleric"},"midi-qol":{"effectActivation":false,"forceCEOn":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Actor.eRdyUWBs84M14oVO.Item.wjt32goECZH1NqG8"}},"img":"icons/magic/light/explosion-star-small-blue-yellow.webp","effects":[{"label":"Light","icon":"icons/magic/light/explosion-star-small-blue-yellow.webp","origin":"Actor.eRdyUWBs84M14oVO.Item.wjt32goECZH1NqG8","duration":{"seconds":3600,"startTime":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"1FjJV4OUtsky1Bad","changes":[],"tint":null,"transfer":false,"flags":{"effectmacro":{"onCreate":{"script":"// icon suggestion: icons/sundries/lights/torch-brown-lit.webp\nconst dim_range = 20;\nconst bright_range = 10;\nif (token.data.light.dim === 0) {\n    await token.document.update({\n        light: {\n            alpha: 0.2,\n            angle: 0,\n            bright: bright_range,\n            coloration: 1,\n            dim: dim_range,\n            gradual: true,\n            luminosity: 0.5,\n            saturation: 0,\n            contrast: 0.25,\n            shadows: 0,\n            animation: {\n                speed: 1,\n                intensity: 2,\n                reverse: false,\n                type: \"torch\",\n            },\n            darkness: {\n                min: 0,\n                max: 1,\n            },\n            color: \"#f3e09b\",\n        },\n    });\n} else {\n    await token.document.update({\n        light: {\n            alpha: 0.5,\n            angle: 0,\n            bright: 0,\n            color: \"#000000\",\n            coloration: 1,\n            dim: 0,\n            gradual: true,\n            luminosity: 0.5,\n            saturation: 0,\n            contrast: 0,\n            shadows: 0,\n            animation: {\n                speed: 5,\n                intensity: 5,\n                reverse: false,\n            },\n            darkness: {\n                min: 0,\n                max: 1,\n            },\n        },\n    });\n}"},"onDelete":{"script":"// icon suggestion: icons/sundries/lights/torch-brown-lit.webp\nconst dim_range = 20;\nconst bright_range = 10;\nif (token.data.light.dim === 0) {\n    await token.document.update({\n        light: {\n            alpha: 0.2,\n            angle: 0,\n            bright: bright_range,\n            coloration: 1,\n            dim: dim_range,\n            gradual: true,\n            luminosity: 0.5,\n            saturation: 0,\n            contrast: 0.25,\n            shadows: 0,\n            animation: {\n                speed: 1,\n                intensity: 2,\n                reverse: false,\n                type: \"torch\",\n            },\n            darkness: {\n                min: 0,\n                max: 1,\n            },\n            color: \"#f3e09b\",\n        },\n    });\n} else {\n    await token.document.update({\n        light: {\n            alpha: 0.5,\n            angle: 0,\n            bright: 0,\n            color: \"#000000\",\n            coloration: 1,\n            dim: 0,\n            gradual: true,\n            luminosity: 0.5,\n            saturation: 0,\n            contrast: 0,\n            shadows: 0,\n            animation: {\n                speed: 5,\n                intensity: 5,\n                reverse: false,\n            },\n            darkness: {\n                min: 0,\n                max: 1,\n            },\n        },\n    });\n}"}},"effective-transferral":{"transferBlock":{"button":false,"chat":false,"displayCard":false}},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""}}}],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1669815040073,"modifiedTime":1669815755428,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"slifKhsmD8abjqOP"}
{"name":"Silver Tongue","type":"feat","system":{"description":{"value":"<p><em>3rd-level College of Eloquence feature</em></p>\n<p>You are a master at saying the right thing at the right time. When you make a Charisma (@Compendium[dnd5e.rules.0AGfrwZRzSG0vNKb]{Persuasion}) or Charisma (@Compendium[dnd5e.rules.0AGfrwZRzSG0vNKb]{Deception}) check, you can treat a d20 roll of 9 or lower as a 10.</p>","chat":"","unidentified":""},"source":"Bard : College of Eloquence","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"abil","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["{1d20,10}kh +@abilities.cha.mod +@skills.per.mod+@skills.per.mod","midi-none"]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"flags":{"ddbimporter":{"id":2203079,"type":"class","dndbeyond":{"requiredLevel":3,"displayOrder":1,"levelScale":null,"levelScales":[],"limitedUse":[],"class":"Bard : College of Eloquence"},"class":"Bard","subclass":"College of Eloquence","importId":"sjSkRXCYY5as4uVA"},"obsidian":{"source":{"type":"class","text":"Bard"}},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"core":{"sourceId":"Actor.pgUJBiwcrO7EH944.Item.65otPNMh9D0hhZ8n"}},"img":"icons/commodities/currency/coin-engraved-sun-smile-copper.webp","effects":[],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1668655487452,"modifiedTime":1668970069134,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"wnXg1bEu92BAOOiU"}
{"name":"Arcane Recovery","type":"feat","system":{"description":{"value":"Once per day when you finish a short rest, you can choose expended spell slots to recover - up to a combined level of  6, and none of the slots can be 6th level or higher.\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p class=\"compendium-hr\">You have learned to regain some of your magical energy by studying your spellbook. Once per day when you finish a short rest, you can choose expended spell slots to recover. The spell slots can have a combined level that is equal to or less than half your wizard level (rounded up), and none of the slots can be 6th level or higher.</p>\n<p class=\"Core-Styles_Core-Body\">For example, if you’re a 4th-level wizard, you can recover up to two levels worth of spell slots. You can recover either a 2nd-level spell slot or two 1st-level spell slots.</p>\n  <p></p>\n</details>","chat":"","unidentified":""},"source":"","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":1,"max":"1","per":"lr","recovery":""},"consume":{"type":"attribute","target":"","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"flags":{"ddbimporter":{"id":"1041","entityTypeId":"222216831","componentId":411,"componentTypeId":12168134,"type":"class","class":"Wizard","subclass":"Order of Scribes","dndbeyond":{"levelScale":null,"levelScales":[],"limitedUse":[{"level":null,"uses":1}]},"importId":"jZdl47wZVutcH4Dd"},"infusions":{"infused":false},"obsidian":{"source":{"type":"class","text":"Wizard"}},"itemacro":{"macro":{"name":"Arcane Recovery","type":"script","scope":"global","command":"// Arcane Recovery\n// required modules: itemacro\n\n// get spell object and wizard levels.\nconst levels = actor.getRollData().classes.wizard.levels;\nconst spells = foundry.utils.duplicate(actor.system.spells);\n\n// bail out if you can't use this item again.\nconst available = item.system.uses.value > 0;\nif (!available) {\n  ui.notifications.warn(\"DND5E.AbilityUseUnavailableHint\", {localize: true});\n  return;\n}\n\n// attained spell levels, then mapping to value and max.\nconst level_maps = Array.fromRange(6).reduce((acc, i) => {\n  const s = spells[`spell${i+1}`];\n  if(s.max > 0) acc.push(s);\n  return acc;\n}, []);\n\n// bail out if there are no missing valid spell slots.\nif (!level_maps.some(s => s.value !== s.max)) {\n  ui.notifications.warn(\"You are not missing any valid spell slots.\");\n  return;\n}\n\nconst use = await item.use();\nif (!use) return;\n\nconst maxVal = Math.ceil(levels / 2);\nlet spent = 0;\n\nlet content = `<p name=\"header\">Recovering spell slots: <strong>${spent}</strong> / ${maxVal}.</p> <hr> <form>`;\nfor (let i = 0; i < level_maps.length; i++) {\n  const val = i + 1;\n  const name = `level${val}`;\n  content += `\n  <div class=\"form-group\">\n    <label style=\"text-align:center\"><strong>${val.ordinalString()}-level</strong></label>\n    <div class=\"form-fields\">`;\n  for (let j = 0; j < level_maps[i].max; j++) {\n    const cd = j < level_maps[i].value ? \"checked disabled\" : \"\";\n    content += `<input type=\"checkbox\" value=\"${val}\" name=\"${name}\" ${cd}></input>`;\n  }\n  content += \"</div></div>\";\n}\ncontent += \"</form> <hr>\";\n\nconst dialog = new Dialog({\n  title: \"Arcane Recovery\",\n  content,\n  buttons: {\n    go: {\n      icon: `<i class=\"fa-solid fa-hat-wizard\"></i>`,\n      label: \"Recover\",\n      callback: async (html) => {\n        if (spent > maxVal || spent < 1) {\n          ui.notifications.warn(\"Invalid number of slots to recover.\");\n          return dialog.render(true);\n        }\n        for (let i = 0; i < 9; i++) {\n          const selector = `input[name=level${i+1}]:checked`;\n          const val = html[0].querySelectorAll(selector).length;\n          spells[`spell${i+1}`].value = val;\n\t}\n        await actor.update({\"system.spells\": spells});\n        ui.notifications.info(\"Spell slots recovered!\");\n      }\n    }\n  },\n  render: (html) => {\n    html[0].addEventListener(\"change\", function () {\n      const selector = \"input:checked:not(:disabled)\";\n      const inputs = html[0].querySelectorAll(selector);\n      spent = Array.from(inputs).reduce((acc, node) => {\n        return acc + Number(node.value);\n      }, 0);\n      const hint = `Recovering spell slots: <strong>${spent}</strong> / ${maxVal}.`;\n      html[0].querySelector(\"[name=header]\").innerHTML = hint;\n    });\n  }\n}).render(true);","author":"npmYF618vZgxA5SD","_id":null,"img":"icons/svg/dice-target.svg","folder":null,"sort":0,"ownership":{"default":0},"flags":{},"_stats":{"systemId":null,"systemVersion":null,"coreVersion":null,"createdTime":null,"modifiedTime":null,"lastModifiedBy":null}}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"autoFailFriendly":false,"rollOther":false,"critOther":false,"offHandWeapon":false,"magicdam":false,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Actor.SjsjOTHTLfnugGtm.Item.Gf82wvtMw0sg5rRu"}},"effects":[],"img":"icons/magic/earth/explosion-lava-stone-green.webp","ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1670205997372,"modifiedTime":1670542488825,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"yyOa4Vhpw26e5D9a"}
{"name":"Astral Spark","type":"feat","system":{"description":{"value":"Once per turn, when you hit a target with a simple or martial weapon, you can cause the target to take an additional [[ + 3]] force damage.\n<details>\n  <summary>\n    More Details\n  </summary>\n  <p>\n    </p><p>Your psychic connection to the Astral Plane enables you to mystically access a spark of divine power, which you can channel through your weapons. When you hit a target with a simple or martial weapon, you can cause the target to take extra force damage equal to your proficiency bonus.</p>\n<p>You can use this trait a number of times equal to your proficiency bonus, but you can use it no more than once per turn. You regain all expended uses when you finish a long rest.</p>\n  <p></p>\n</details>","chat":"","unidentified":""},"source":"","activation":{"type":"special","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":5,"long":null,"units":"ft"},"uses":{"value":3,"max":"3","per":"lr","recovery":""},"consume":{"type":"attribute","target":"resources.primary.value","amount":1},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[["@skills.per.mod",""]],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"flags":{"ddbimporter":{"id":"5677331","entityTypeId":"222216831","componentId":9151721,"componentTypeId":1960452172,"importId":"l9b64GflzTVKzzjO"},"infusions":{"infused":false},"obsidian":{"source":{"type":"race"}},"midi-qol":{"effectActivation":false},"midiProperties":{"nodam":false,"fulldam":false,"halfdam":false,"rollOther":false,"critOther":false,"magicdam":true,"magiceffect":false,"concentration":false,"toggleEffect":false,"ignoreTotalCover":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Actor.pgUJBiwcrO7EH944.Item.GwlzgyA9lT6luiD8"}},"effects":[],"img":"icons/magic/holy/projectiles-blades-salvo-yellow.webp","ownership":{"default":0,"npmYF618vZgxA5SD":3},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.290","createdTime":1668710978263,"modifiedTime":1668970053040,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"zty1njLeRnDoMXjy"}
{"name":"Regeneration","type":"feat","system":{"description":{"value":"<p>The Creature regenerates a number of hit points at their Start of Turn.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":null,"max":"","per":null,"recovery":""},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":{"threshold":null,"damage":""},"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"img":"icons/magic/life/heart-cross-strong-green.webp","effects":[{"label":"Regeneration","icon":"icons/magic/life/heart-cross-strong-green.webp","origin":"Actor.WjfLCbet2AWdcxEK.Item.jFOhsWkgRF9eBZ6O","duration":{"startTime":null,"seconds":null,"combat":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"disabled":false,"_id":"S33894HOdBt6zHl2","changes":[],"tint":null,"transfer":true,"flags":{"effectmacro":{"onTurnStart":{"script":"/**\n * Effect-Macro Macro for regeneraion\n * \n * https://github.com/itteerde/fvttconfig/issues/74\n */\n\nconst healingPerTurn = 10;\nconst flagKey = \"flags.world.regenerationSuppress\";\n\nconst effect = actor.effects.find(e => foundry.utils.hasProperty(e, flagKey));\n\nif (effect) {\n    return;\n}\n\nactor.applyDamage(-healingPerTurn);"}},"effective-transferral":{"transferBlock":{"button":false,"chat":false,"displayCard":false},"transferrable":{"self":true,"target":true}},"dae":{"selfTarget":false,"selfTargetAlways":false,"stackable":"none","durationExpression":"","macroRepeat":"none","specialDuration":[]},"core":{"statusId":""}}}],"ownership":{"default":0,"npmYF618vZgxA5SD":3},"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"core":{"sourceId":"Actor.WjfLCbet2AWdcxEK.Item.jFOhsWkgRF9eBZ6O"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.0.3","coreVersion":"10.291","createdTime":1670609744085,"modifiedTime":1670616255488,"lastModifiedBy":"npmYF618vZgxA5SD"},"folder":null,"sort":0,"_id":"T4pEujwoabtY8CmR"}
