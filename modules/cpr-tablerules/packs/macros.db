{"name":"Scale Up","type":"script","scope":"global","author":"NULqOZ3hJTnRGB81","img":"modules/Tablerules/icons/gui/ScaleUp.png","command":"const scalingPercent = 5 / 100;\ntoken = canvas.tokens.controlled[0];\nawait token.document.update({ \"texture.scaleX\": token.document.texture.scaleX * (1 + scalingPercent), \"texture.scaleY\": token.document.texture.scaleY * (1 + scalingPercent) });","ownership":{"default":0,"NULqOZ3hJTnRGB81":3},"flags":{"core":{"sourceId":"Macro.0w3oA4BlomjWiOR2"}},"_stats":{"systemId":"cyberpunk-red-core","systemVersion":"v0.86.1","coreVersion":"10.291","createdTime":1681622441998,"modifiedTime":1681622480746,"lastModifiedBy":"NULqOZ3hJTnRGB81"},"folder":null,"sort":0,"_id":"44H8y5fMNTebuV0d"}
{"name":"Skills Sum","type":"script","scope":"global","author":"NULqOZ3hJTnRGB81","img":"icons/svg/dice-target.svg","command":"const buttons = {\n    heal: {\n        icon: \"<i class='fa-solid fa-hand-holding-heart'></i>\",\n        label: \"OK\",\n        callback: async (html) => {\n        }\n    }\n}\n\nnew Dialog({ title: \"Skill Sum\", content: `${canvas.tokens.controlled[0].actor.items.filter(i => i.type === \"skill\").filter(i => i.system.core === true).reduce((acc, i) => { return acc + ((i.system.difficulty === \"dificult\") ? i.system.level * 2 : i.system.level) }, 0)}`, buttons }).render(true);","ownership":{"default":0,"NULqOZ3hJTnRGB81":3},"flags":{"core":{"sourceId":"Macro.dQu7cTb9KkYkm569"}},"_stats":{"systemId":"cyberpunk-red-core","systemVersion":"v0.86.1","coreVersion":"10.291","createdTime":1681622314369,"modifiedTime":1681622324505,"lastModifiedBy":"NULqOZ3hJTnRGB81"},"folder":null,"sort":0,"_id":"5xBVpgiGZLdgOfOP"}
{"name":"Dim Down","type":"script","scope":"global","author":"NULqOZ3hJTnRGB81","img":"modules/Tablerules/icons/gui/ScaleDown.png","command":"await token.document.update({ height: token.document.height / 2, width: token.document.width / 2 })","ownership":{"default":0,"NULqOZ3hJTnRGB81":3},"flags":{"core":{"sourceId":"Macro.T1SVHlGb9H4POGI2"}},"_stats":{"systemId":"cyberpunk-red-core","systemVersion":"v0.86.1","coreVersion":"10.291","createdTime":1681622524211,"modifiedTime":1681622551819,"lastModifiedBy":"NULqOZ3hJTnRGB81"},"folder":null,"sort":0,"_id":"B02B6k0Dzoe9NQ6N"}
{"name":"Cycle Wildcard Token","type":"script","scope":"global","author":"NULqOZ3hJTnRGB81","img":"icons/svg/dice-target.svg","command":"// https://github.com/krbz999/zhell-macros/blob/main/tools/token/cycle_token_wildcards.js\nconst currentImg = token.document.texture.src;\nconst actorId = token.actor.id;\nconst wildcardImages = await game.actors.get(actorId).getTokenImages();\nconst currentIndex = wildcardImages.indexOf(currentImg);\nconst next = (currentIndex + 1) === wildcardImages.length ? 0 : currentIndex + 1;\nawait token.document.update({ \"texture.src\": wildcardImages[next] });","ownership":{"default":0,"NULqOZ3hJTnRGB81":3},"flags":{"core":{"sourceId":"Macro.8x36wGygfdANvyBZ"}},"_stats":{"systemId":"cyberpunk-red-core","systemVersion":"v0.86.1","coreVersion":"10.291","createdTime":1681621349567,"modifiedTime":1681621368284,"lastModifiedBy":"NULqOZ3hJTnRGB81"},"folder":null,"sort":0,"_id":"IY10V44ySzdZ0DwC"}
{"name":"WeaponDamageMinus","type":"script","scope":"global","author":"NULqOZ3hJTnRGB81","img":"systems/cyberpunk-red-core/icons/dice/black/d6_6.svg","command":"actor = canvas.tokens.controlled[0].actor;\nweapons = actor.items.filter(i => i.system.equipped === \"equipped\" && i.type === \"weapon\");\n\nif (weapons.length !== 1) {\n    ui.notifications.warn(\"Exactly one weapon needs to be equiped for this to work.\");\n    return;\n} else {\n    weapon = weapons[0];\n}\n\ndamage = weapon.system.damage;\nnumberOfDice = Number(damage.substr(0, damage.length - 2));\n\nui.notifications.info(`Setting damage of ${actor}'s ${weapon.name} to ${numberOfDice - 1}d6`);\n\nawait weapon.update({ \"system.damage\": `${numberOfDice - 1}d6` });","ownership":{"default":0,"NULqOZ3hJTnRGB81":3},"flags":{"core":{"sourceId":"Macro.FOMCSYLUghMaAc34"}},"_stats":{"systemId":"cyberpunk-red-core","systemVersion":"v0.86.1","coreVersion":"10.303","createdTime":1688348696288,"modifiedTime":1688405311655,"lastModifiedBy":"NULqOZ3hJTnRGB81"},"folder":null,"sort":0,"_id":"P1PaPuMt1m6WUZhf"}
{"name":"Rotate +1","type":"script","scope":"global","author":"NULqOZ3hJTnRGB81","img":"modules/Tablerules/icons/gui/rotateCW_white.png","command":"token.document.update({ rotation: token.document.rotation + 1 });","ownership":{"default":0,"NULqOZ3hJTnRGB81":3},"flags":{"core":{"sourceId":"Macro.KacjAO4ZBWL4wLqA"}},"_stats":{"systemId":"cyberpunk-red-core","systemVersion":"v0.86.1","coreVersion":"10.291","createdTime":1681621841627,"modifiedTime":1682886727548,"lastModifiedBy":"NULqOZ3hJTnRGB81"},"folder":null,"sort":0,"_id":"kUY3ZYtj1fSycU5U"}
{"name":"Cycle Wildcard Token -1","type":"script","scope":"global","author":"NULqOZ3hJTnRGB81","img":"icons/svg/dice-target.svg","command":"// https://github.com/krbz999/zhell-macros/blob/main/tools/token/cycle_token_wildcards.js\nconst currentImg = token.document.texture.src;\nconst actorId = token.actor.id;\nconst wildcardImages = await game.actors.get(actorId).getTokenImages();\nconst currentIndex = wildcardImages.indexOf(currentImg);\nconst next = (currentIndex - 1) >= 0 ? (currentIndex - 1) : wildcardImages.length - 1;\n\nawait token.document.update({ \"texture.src\": wildcardImages[next] });","ownership":{"default":0,"NULqOZ3hJTnRGB81":3},"flags":{"core":{"sourceId":"Macro.6vsxMAGCxuHdocaq"}},"_stats":{"systemId":"cyberpunk-red-core","systemVersion":"v0.86.1","coreVersion":"10.291","createdTime":1681621375536,"modifiedTime":1681621389725,"lastModifiedBy":"NULqOZ3hJTnRGB81"},"folder":null,"sort":0,"_id":"pF2mBolEoxbWyUU0"}
{"name":"WeaponDamagePlus","type":"script","scope":"global","author":"NULqOZ3hJTnRGB81","img":"systems/cyberpunk-red-core/icons/dice/black/d6_6.svg","command":"actor = canvas.tokens.controlled[0].actor;\nweapons = actor.items.filter(i => i.system.equipped === \"equipped\" && i.type === \"weapon\");\n\nif (weapons.length !== 1) {\n    ui.notifications.warn(\"Exactly one weapon needs to be equiped for this to work.\");\n    return;\n} else {\n    weapon = weapons[0];\n}\n\ndamage = weapon.system.damage;\nnumberOfDice = Number(damage.substr(0, damage.length - 2));\n\nui.notifications.info(`Setting damage of ${actor}'s ${weapon.name} to ${numberOfDice + 1}d6`);\n\nawait weapon.update({ \"system.damage\": `${numberOfDice + 1}d6` });","ownership":{"default":0,"NULqOZ3hJTnRGB81":3},"flags":{"core":{"sourceId":"Macro.gW31V3hnJcGMKk79"}},"_stats":{"systemId":"cyberpunk-red-core","systemVersion":"v0.86.1","coreVersion":"10.303","createdTime":1688348624763,"modifiedTime":1688405313410,"lastModifiedBy":"NULqOZ3hJTnRGB81"},"folder":null,"sort":0,"_id":"rrxi71kthQyFTMRf"}
{"name":"Scale Down","type":"script","scope":"global","author":"NULqOZ3hJTnRGB81","img":"modules/Tablerules/icons/gui/ScaleDown.png","command":"const scalingPercent = -(5 / 100);\ntoken = canvas.tokens.controlled[0];\nawait token.document.update({ \"texture.scaleX\": token.document.texture.scaleX * (1 + scalingPercent), \"texture.scaleY\": token.document.texture.scaleY * (1 + scalingPercent) });","ownership":{"default":0,"NULqOZ3hJTnRGB81":3},"flags":{"core":{"sourceId":"Macro.cKC70UQ9XOw3OsJQ"}},"_stats":{"systemId":"cyberpunk-red-core","systemVersion":"v0.86.1","coreVersion":"10.291","createdTime":1681622411466,"modifiedTime":1681622493386,"lastModifiedBy":"NULqOZ3hJTnRGB81"},"folder":null,"sort":0,"_id":"wgmQgiDTkX8KzhpU"}
{"name":"List Modules","type":"script","scope":"global","author":"NULqOZ3hJTnRGB81","img":"icons/svg/dice-target.svg","command":"// the console report can be copied directly into the Markdown documentation (right-click copy String contents)\n\nconst modulesActive = game.modules.filter(m => m.active);\nconst moduleReport = modulesActive.map(\n    m => ({ id: m.id, title: m.title, version: m.version })\n);\nconsole.log(modulesActive);\nconsole.log(moduleReport);\n\nlet reportString = \"\";\n\nfor (i = 0; i < modulesActive.length; i++) {\n    m = modulesActive[i];\n    reportString = `${reportString}\\n1. ${m.title} (version: ${m.version}) : [Project-URL](${m.url})`;\n}\n\nconsole.log({ reportString: reportString });","ownership":{"default":0,"NULqOZ3hJTnRGB81":3},"flags":{"core":{"sourceId":"Macro.92QULNlo8yvQ7U40"}},"_stats":{"systemId":"cyberpunk-red-core","systemVersion":"v0.86.1","coreVersion":"10.291","createdTime":1681621121983,"modifiedTime":1681621162979,"lastModifiedBy":"NULqOZ3hJTnRGB81"},"folder":null,"sort":0,"_id":"xBbTSYESfNmgIbLa"}
{"name":"Dim Up","type":"script","scope":"global","author":"NULqOZ3hJTnRGB81","img":"modules/Tablerules/icons/gui/ScaleUp.png","command":"await token.document.update({ height: token.document.height * 2, width: token.document.width * 2 })","ownership":{"default":0,"NULqOZ3hJTnRGB81":3},"flags":{"core":{"sourceId":"Macro.UbybPef5pSDiqtVI"}},"_stats":{"systemId":"cyberpunk-red-core","systemVersion":"v0.86.1","coreVersion":"10.291","createdTime":1681622572502,"modifiedTime":1681622595683,"lastModifiedBy":"NULqOZ3hJTnRGB81"},"folder":null,"sort":0,"_id":"yn2VeXQupwFNT11n"}
{"name":"Stats Sum","type":"script","scope":"global","author":"NULqOZ3hJTnRGB81","img":"icons/svg/dice-target.svg","command":"const buttons = {\n    heal: {\n        icon: \"<i class='fa-solid fa-hand-holding-heart'></i>\",\n        label: \"OK\",\n        callback: async (html) => {\n        }\n    }\n}\n\nconst sum =\n    canvas.tokens.controlled[0].actor.system.stats.body.value +\n    canvas.tokens.controlled[0].actor.system.stats.cool.value +\n    canvas.tokens.controlled[0].actor.system.stats.dex.value +\n    canvas.tokens.controlled[0].actor.system.stats.emp.max +\n    canvas.tokens.controlled[0].actor.system.stats.int.value +\n    canvas.tokens.controlled[0].actor.system.stats.luck.max +\n    canvas.tokens.controlled[0].actor.system.stats.move.value +\n    canvas.tokens.controlled[0].actor.system.stats.ref.value +\n    canvas.tokens.controlled[0].actor.system.stats.tech.value +\n    canvas.tokens.controlled[0].actor.system.stats.will.value;\n\nnew Dialog({ title: \"Stats Sum\", content: `${sum}`, buttons }).render(true);","ownership":{"default":0,"NULqOZ3hJTnRGB81":3},"flags":{"core":{"sourceId":"Macro.RDt3ESPcWtgS8tC4"}},"_stats":{"systemId":"cyberpunk-red-core","systemVersion":"v0.86.1","coreVersion":"10.291","createdTime":1681622333465,"modifiedTime":1681622342161,"lastModifiedBy":"NULqOZ3hJTnRGB81"},"folder":null,"sort":0,"_id":"z3WpmCkH6e5urIJo"}
{"name":"Rotate -1","type":"script","scope":"global","author":"NULqOZ3hJTnRGB81","img":"modules/Tablerules/icons/gui/rotateCCW_white.png","command":"token.document.update({ rotation: token.document.rotation - 1 });","ownership":{"default":0,"NULqOZ3hJTnRGB81":3},"flags":{"core":{"sourceId":"Macro.KacjAO4ZBWL4wLqA"}},"_stats":{"systemId":"cyberpunk-red-core","systemVersion":"v0.86.1","coreVersion":"10.291","createdTime":1681621841627,"modifiedTime":1681622142665,"lastModifiedBy":"NULqOZ3hJTnRGB81"},"folder":null,"sort":0,"_id":"zKRvBYy6g09owgYz"}
{"$$deleted":true,"_id":"P1PaPuMt1m6WUZhf"}
{"$$deleted":true,"_id":"rrxi71kthQyFTMRf"}
{"name":"WeaponDamageMinus","type":"script","scope":"global","author":"NULqOZ3hJTnRGB81","img":"systems/cyberpunk-red-core/icons/dice/black/d6_6.svg","command":"actor = canvas.tokens.controlled[0]?.actor;\nif (actor === undefined) {\n    ui.notifications.warn(\"Select exactly one Actor\");\n    return;\n}\n\nweapons = actor.items.filter(i => i.system.equipped === \"equipped\" && i.type === \"weapon\");\n\nif (weapons.length !== 1) {\n    ui.notifications.warn(\"Exactly one weapon needs to be equiped for this to work.\");\n    return;\n} else {\n    weapon = weapons[0];\n}\n\ndamage = weapon.system.damage;\nnumberOfDice = Number(damage.substr(0, damage.length - 2));\n\nui.notifications.info(`Setting damage of ${actor}'s ${weapon.name} to ${numberOfDice - 1}d6`);\n\nawait weapon.update({ \"system.damage\": `${numberOfDice - 1}d6` });","ownership":{"default":0,"NULqOZ3hJTnRGB81":3},"flags":{"core":{"sourceId":"Macro.FOMCSYLUghMaAc34"}},"_stats":{"systemId":"cyberpunk-red-core","systemVersion":"v0.86.1","coreVersion":"10.303","createdTime":1688348696288,"modifiedTime":1688407305454,"lastModifiedBy":"NULqOZ3hJTnRGB81"},"folder":null,"sort":0,"_id":"M0Bcr2sffANlqRuR"}
{"name":"WeaponDamagePlus","type":"script","scope":"global","author":"NULqOZ3hJTnRGB81","img":"systems/cyberpunk-red-core/icons/dice/black/d6_6.svg","command":"actor = canvas.tokens.controlled[0]?.actor;\nif (actor === undefined) {\n    ui.notifications.warn(\"Select exactly one Actor\");\n    return;\n}\n\nweapons = actor.items.filter(i => i.system.equipped === \"equipped\" && i.type === \"weapon\");\n\nif (weapons.length !== 1) {\n    ui.notifications.warn(\"Exactly one weapon needs to be equiped for this to work.\");\n    return;\n} else {\n    weapon = weapons[0];\n}\n\ndamage = weapon.system.damage;\nnumberOfDice = Number(damage.substr(0, damage.length - 2));\n\nui.notifications.info(`Setting damage of ${actor}'s ${weapon.name} to ${numberOfDice + 1}d6`);\n\nawait weapon.update({ \"system.damage\": `${numberOfDice + 1}d6` });","ownership":{"default":0,"NULqOZ3hJTnRGB81":3},"flags":{"core":{"sourceId":"Macro.gW31V3hnJcGMKk79"}},"_stats":{"systemId":"cyberpunk-red-core","systemVersion":"v0.86.1","coreVersion":"10.303","createdTime":1688348624763,"modifiedTime":1688407306919,"lastModifiedBy":"NULqOZ3hJTnRGB81"},"folder":null,"sort":0,"_id":"9LWmNwa6Jk8708TE"}
